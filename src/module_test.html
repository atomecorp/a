<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Web Component - Final Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            font-family: 'Arial', sans-serif;
            color: white;
            min-height: 100vh;
        }
        
        .test-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .test-section {
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .test-title {
            font-size: 24px;
            margin-bottom: 15px;
            color: #4fc3f7;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: linear-gradient(145deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .workspace {
            min-height: 400px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            position: relative;
            border: 2px dashed rgba(255, 255, 255, 0.2);
        }
        
        .info-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 300px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .info-item {
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #4caf50; }
        .status-warning { background: #ff9800; }
        .status-error { background: #f44336; }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-section">
            <h1 class="test-title">üîß Module Web Component - Final Test Suite</h1>
            <p>Test complet du Module Web Component avec animations configurables et propri√©t√©s CSS avanc√©es.</p>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">Controls</h2>
            <div class="controls">
                <button class="control-btn" onclick="createBasicModule()">Create Basic Module</button>
                <button class="control-btn" onclick="createAdvancedModule()">Create Advanced Module</button>
                <button class="control-btn" onclick="createBombeModule()">Create Bomb√© Module</button>
                <button class="control-btn" onclick="toggleAnimations()">Toggle Animations</button>
                <button class="control-btn" onclick="connectModules()">Connect Modules</button>
                <button class="control-btn" onclick="clearWorkspace()">Clear All</button>
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">Workspace</h2>
            <div class="workspace" id="workspace"></div>
        </div>
    </div>
    
    <div class="info-panel" id="infoPanel">
        <h3>Module Status</h3>
        <div id="moduleInfo">No modules created yet</div>
    </div>

    <script type="module">
        import Module from './a/components/Module_New.js';
        
        let moduleCounter = 0;
        let animationsEnabled = true;
        
        // Expose functions to global scope for button onclick
        window.createBasicModule = createBasicModule;
        window.createAdvancedModule = createAdvancedModule;
        window.createBombeModule = createBombeModule;
        window.toggleAnimations = toggleAnimations;
        window.connectModules = connectModules;
        window.clearWorkspace = clearWorkspace;
        
        function updateInfo() {
            const modules = document.querySelectorAll('squirrel-module');
            const info = document.getElementById('moduleInfo');
            
            if (modules.length === 0) {
                info.innerHTML = '<div class="info-item"><span class="status-indicator status-warning"></span>No modules created</div>';
                return;
            }
            
            let html = `<div class="info-item"><span class="status-indicator status-success"></span>Modules: ${modules.length}</div>`;
            html += `<div class="info-item"><span class="status-indicator ${animationsEnabled ? 'status-success' : 'status-warning'}"></span>Animations: ${animationsEnabled ? 'Enabled' : 'Disabled'}</div>`;
            
            modules.forEach((module, index) => {
                html += `<div class="info-item">‚Ä¢ ${module.name || `Module ${index + 1}`}</div>`;
            });
            
            info.innerHTML = html;
        }
        
        function createBasicModule() {
            moduleCounter++;
            const module = new Module({
                id: `basic-module-${moduleCounter}`,
                name: `Basic Module ${moduleCounter}`,
                inputs: [
                    { name: 'Input 1', type: 'audio' },
                    { name: 'Input 2', type: 'control' }
                ],
                outputs: [
                    { name: 'Output 1', type: 'audio' },
                    { name: 'Output 2', type: 'data' }
                ],
                containerStyle: {
                    background: 'linear-gradient(145deg, #667eea 0%, #764ba2 100%)',
                    borderRadius: '12px',
                    boxShadow: '0 8px 32px rgba(102, 126, 234, 0.3)',
                    border: '1px solid rgba(255, 255, 255, 0.1)'
                },
                position: {
                    x: Math.random() * 400 + 50,
                    y: Math.random() * 200 + 50
                },
                animations: {
                    enabled: animationsEnabled
                }
            });
            
            document.getElementById('workspace').appendChild(module);
            updateInfo();
            console.log('‚úÖ Basic module created:', module.id);
        }
        
        function createAdvancedModule() {
            moduleCounter++;
            const module = new Module({
                id: `advanced-module-${moduleCounter}`,
                name: `Advanced Module ${moduleCounter}`,
                inputs: [
                    { name: 'Audio In', type: 'audio' },
                    { name: 'MIDI In', type: 'midi' },
                    { name: 'Control', type: 'control' }
                ],
                outputs: [
                    { name: 'Audio Out', type: 'audio' },
                    { name: 'Video Out', type: 'video' },
                    { name: 'Data Out', type: 'data' }
                ],
                containerStyle: {
                    background: [
                        'linear-gradient(45deg, #ff6b6b, #4ecdc4)',
                        'radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2) 0%, transparent 50%)'
                    ],
                    borderRadius: '16px',
                    boxShadow: [
                        '0 20px 40px rgba(255, 107, 107, 0.3)',
                        '0 10px 20px rgba(78, 205, 196, 0.2)',
                        'inset 0 2px 4px rgba(255, 255, 255, 0.1)'
                    ],
                    border: '2px solid rgba(255, 255, 255, 0.2)'
                },
                position: {
                    x: Math.random() * 400 + 50,
                    y: Math.random() * 200 + 50
                },
                animations: {
                    enabled: animationsEnabled,
                    moduleHover: {
                        enabled: true,
                        transform: 'scale(1.05) translateY(-4px)',
                        duration: '0.4s',
                        timing: 'cubic-bezier(0.4, 0, 0.2, 1)'
                    }
                }
            });
            
            document.getElementById('workspace').appendChild(module);
            updateInfo();
            console.log('‚úÖ Advanced module created:', module.id);
        }
        
        function createBombeModule() {
            moduleCounter++;
            const module = new Module({
                id: `bombe-module-${moduleCounter}`,
                name: `Bomb√© Premium ${moduleCounter}`,
                inputs: [
                    { name: 'Premium In', type: 'audio' }
                ],
                outputs: [
                    { name: 'Premium Out', type: 'audio' }
                ],
                containerStyle: {
                    background: [
                        'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',
                        'radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%)',
                        'radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.15) 0%, transparent 50%)',
                        'conic-gradient(from 45deg, rgba(255, 255, 255, 0.1) 0deg, transparent 60deg, rgba(255, 255, 255, 0.1) 120deg, transparent 180deg)'
                    ],
                    borderRadius: '20px',
                    boxShadow: [
                        '0 25px 50px rgba(102, 126, 234, 0.4)',
                        '0 15px 30px rgba(118, 75, 162, 0.3)',
                        '0 8px 16px rgba(240, 147, 251, 0.2)',
                        'inset 0 4px 8px rgba(255, 255, 255, 0.15)',
                        'inset 0 -4px 8px rgba(0, 0, 0, 0.2)',
                        'inset 2px 2px 4px rgba(255, 255, 255, 0.1)',
                        'inset -2px -2px 4px rgba(0, 0, 0, 0.1)'
                    ],
                    border: '3px solid rgba(255, 255, 255, 0.3)',
                    backdropFilter: 'blur(10px)'
                },
                position: {
                    x: Math.random() * 400 + 50,
                    y: Math.random() * 200 + 50
                },
                animations: {
                    enabled: animationsEnabled,
                    moduleHover: {
                        enabled: true,
                        transform: 'scale(1.08) translateY(-6px) rotateX(5deg)',
                        duration: '0.5s',
                        timing: 'cubic-bezier(0.4, 0, 0.2, 1)'
                    },
                    moduleSelect: {
                        enabled: true,
                        transform: 'scale(1.1) translateY(-8px)',
                        boxShadow: [
                            '0 30px 60px rgba(102, 126, 234, 0.6)',
                            '0 0 20px rgba(255, 255, 255, 0.5)'
                        ]
                    }
                }
            });
            
            document.getElementById('workspace').appendChild(module);
            updateInfo();
            console.log('‚úÖ Bomb√© premium module created:', module.id);
        }
        
        function toggleAnimations() {
            animationsEnabled = !animationsEnabled;
            const modules = document.querySelectorAll('squirrel-module');
            
            modules.forEach(module => {
                if (animationsEnabled) {
                    module.enableAnimations();
                } else {
                    module.disableAnimations();
                }
            });
            
            updateInfo();
            console.log(`üé≠ Animations ${animationsEnabled ? 'enabled' : 'disabled'}`);
        }
        
        function connectModules() {
            const modules = document.querySelectorAll('squirrel-module');
            if (modules.length >= 2) {
                console.log('üîó Connection mode enabled - Click on connectors to connect modules');
                // This would trigger the connection UI in a real implementation
            } else {
                console.log('‚ö†Ô∏è Need at least 2 modules to test connections');
            }
        }
        
        function clearWorkspace() {
            const workspace = document.getElementById('workspace');
            workspace.innerHTML = '';
            moduleCounter = 0;
            updateInfo();
            console.log('üßπ Workspace cleared');
        }
        
        // Initial setup
        updateInfo();
        
        // Test basic functionality on load
        console.log('üöÄ Module Web Component Test Suite Loaded');
        console.log('üìã Available commands:');
        console.log('  - createBasicModule() - Create a basic module');
        console.log('  - createAdvancedModule() - Create an advanced module with complex styling');
        console.log('  - createBombeModule() - Create a premium bomb√© module');
        console.log('  - toggleAnimations() - Enable/disable animations on all modules');
        console.log('  - connectModules() - Test connection functionality');
        console.log('  - clearWorkspace() - Remove all modules');
    </script>
</body>
</html>
