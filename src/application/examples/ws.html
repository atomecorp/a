<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test WebSocket avec Fastify</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            z-index: 1000;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="loading">üîÑ Chargement de l'application WebSocket...</div>
    
    <!-- Chargement des d√©pendances Squirrel -->
    <script src="../../squirrel/squirrel.js"></script>
    
    <script>
        // Attendre que Squirrel soit charg√©
        document.addEventListener('DOMContentLoaded', function() {
            // Cacher le loading
            document.getElementById('loading').style.display = 'none';
            
            // Ajouter un effet de fondu au body
            document.body.classList.add('fade-in');
            
            // Charger l'application WebSocket
            const script = document.createElement('script');
            script.src = './ws.js';
            script.onload = function() {
                console.log('üöÄ Application WebSocket charg√©e avec succ√®s !');
            };
            script.onerror = function() {
                console.error('‚ùå Erreur lors du chargement de l\'application WebSocket');
                document.body.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: white;">
                        <h1>‚ùå Erreur de chargement</h1>
                        <p>Impossible de charger l'application WebSocket.</p>
                        <p>V√©rifiez que tous les fichiers sont pr√©sents.</p>
                    </div>
                `;
            };
            document.head.appendChild(script);
        });
    </script>
</body>
</html>
