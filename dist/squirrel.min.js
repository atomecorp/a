!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Squirrel={})}(this,function(e){"use strict";window.puts=function(e){console.log(e)},window.print=function(e){console.log("[PRINT]",e)},window.grab=function(){const e=new Map;return function(t){if(!t)return null;const n=_registry[t];if(n)return n;if(e.has(t)){const n=e.get(t);if(n&&n.isConnected)return n;e.delete(t)}const o=document.getElementById(t);if(!o)return null;if(!o._enhanced){o._enhanced=!0;["width","height","color","backgroundColor","x","y"].forEach(e=>{const t="x"===e?"left":"y"===e?"top":e;o[e]=function(e){return 0===arguments.length?getComputedStyle(this)[t]:(this.style[t]=window._isNumber&&window._isNumber(e)?window._formatSize(e):e,this)}})}return e.set(t,o),o}}(),Object.defineProperty(Object.prototype,"define_method",{value:function(e,t){return this[e]=t,this},enumerable:!1,writable:!1,configurable:!1}),Array.prototype.each=function(e){return this.forEach(e),this},Object.defineProperty(Object.prototype,"inspect",{value:function(){return AJS.inspect(this)},enumerable:!1,writable:!1,configurable:!1});const t=(e,t)=>{if("function"!=typeof t)return new Promise(t=>setTimeout(t,e));setTimeout(t,e)};function n(e){e.removeAllEventListeners?e.removeAllEventListeners():e.cloneNode(!1),Array.from(e.children).forEach(e=>{n(e)})}function o(){try{if("undefined"==typeof window)return"serveur";const e=navigator.userAgent||"",t=navigator.vendor||"",n=e.toLowerCase(),o=/apple/i.test(t),i="ontouchstart"in window||navigator.maxTouchPoints>0,s=/iPad|iPhone|iPod/.test(e),r=!s&&o&&i&&/macintosh/i.test(e),a=s||r;if(!!window.__TAURI__||e.includes("Tauri"))return/Macintosh|Mac OS X/.test(e)?"Tauri Mac":/Windows/.test(e)?"Taur Windows":/Linux/.test(e)?"Tauri Unix":"Tauri";let l=!1;if(!!(window.__AUV3_MODE__||window.__AUV3__||"undefined"!=typeof location&&/[?&](auv3=1|mode=auv3)(?:&|$)/i.test(location.search))&&a)return"ios_auv3";if(a&&window.webkit&&window.webkit.messageHandlers)try{const e=window.webkit.messageHandlers,t=Object.keys(e);if(t.length){const e=/(auv3|plug|audio|swift|host|bridge|atome)/i;t.some(t=>e.test(t))&&(l=!0),!l&&("file:"===location.protocol||t.length>1)&&(l=!0)}}catch(e){}if(!0===window.forceAUv3Mode&&(l=!0),l)return"ios_auv3";if(a)return"ios";const c=o&&/safari/i.test(e)&&!/chrome|crios|chromium|edg|opr|firefox|fxios|tauri|electron/i.test(n);return/Macintosh|Mac OS X/.test(e)?c?"safari_mac":"desktop_mac":/Windows/.test(e)?"desktop_windows":/Linux/.test(e)?"desktop_linux":"web"}catch(e){return"inconnu"}}window.wait=t,window.log=window.puts,window._registry=window._registry||{},window.AJS=window.AJS||{inspect:function(e){return JSON.stringify(e,null,2)}},window.clearScreen=function(){const e=document.getElementById("view");e&&(n(e),e.innerHTML="",function(){window.gsap&&(gsap.killTweensOf("*"),gsap.globalTimeline.clear());window.rotationAnimation&&(cancelAnimationFrame(window.rotationAnimation),window.rotationAnimation=null);window.deformTweens&&(window.deformTweens.forEach(e=>{e&&e.kill&&e.kill()}),window.deformTweens=[])}())},"undefined"!=typeof window&&(window.current_platform=o),function(){const e=["ctrl","alt","shift","meta"],t=new Map([["cmd","meta"],["command","meta"],["win","meta"],["super","meta"],["ctl","ctrl"],["control","ctrl"],["opt","alt"],["option","alt"]]),n=new Map;function o(e){return e?(e=String(e).trim().toLowerCase(),t.has(e)&&(e=t.get(e)),"space"!==e&&" "!==e||(e="space"),"arrowup"!==e&&"up"!==e||(e="arrowup"),"arrowdown"!==e&&"down"!==e||(e="arrowdown"),"arrowleft"!==e&&"left"!==e||(e="arrowleft"),"arrowright"!==e&&"right"!==e||(e="arrowright"),e):""}function i(){i._installed||(window.addEventListener("keydown",e=>{const t=function(e){const t=[];e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta");let n="";const o=e.code||"";return/^Key[A-Z]$/.test(o)?n=o.slice(3).toLowerCase():/^Digit[0-9]$/.test(o)?n=o.slice(5):(n=(e.key||"").toLowerCase()," "===n&&(n="space"),/^arrow(Up|Down|Left|Right)$/i.test(e.key)&&(n=e.key.toLowerCase())),[...t,n].filter(Boolean).join("+")}(e),o=n.get(t);if(o&&0!==o.size)for(const n of o)try{n(t,e)}catch(e){}},!0),i._installed=!0)}window.shortcut=function(t,s){const r=function(t){if(!t)return"";const n=String(t).split(/[-+]/).map(e=>String(e).trim()).filter(Boolean),i=new Set;let s="",r=!1;for(const t of n){const n=o(t);e.includes(n)?i.add(n):/^[A-Z]$/.test(t)?(r=!0,s=t.toLowerCase()):s=n}return r&&i.add("shift"),[...e.filter(e=>i.has(e)),s].filter(Boolean).join("+")}(t);if(!r||"function"!=typeof s)return()=>{};i();let a=n.get(r);return a||(a=new Set,n.set(r,a)),a.add(s),function(){const e=n.get(r);e&&(e.delete(s),0===e.size&&n.delete(r))}}}(),function(){if("undefined"==typeof window)return;const e="__ATOME_LOCAL_HTTP_PORT__";if(!window[e])try{const t=localStorage.getItem(e);t&&(window[e]=parseInt(t,10))}catch(e){}if(window[e])try{localStorage.setItem(e,String(window[e]))}catch(e){}}();const i={};"undefined"!=typeof window&&void 0===window.span&&(window.span={textContent:""});const s={};function r(e,t={}){const n=(t.mode||"auto").toLowerCase(),o=e+"::"+n+"::"+(t.preview||"");if(i[o])return Promise.resolve(i[o]);if(s[o])return s[o];if("function"!=typeof fetch)return Promise.reject(new Error("fetch indisponible"));const r=(async()=>{let r=(e||"").trim();if(r=r.replace(/^(?:\.\/)+/,""),r=r.replace(/^\/+/,""),!r)throw new Error("Chemin vide");const a=r.split("/").pop(),l=(a.includes(".")?a.split(".").pop():"").toLowerCase(),c="svg"===l,d=r.includes(" "),h="undefined"!=typeof window?window.__ATOME_LOCAL_HTTP_PORT__||window.ATOME_LOCAL_HTTP_PORT||window.__LOCAL_HTTP_PORT:null,u=/^(txt|json|md|svg|xml|csv|log)$/.test(l)||/^texts\//.test(r),p=/^(m4a|mp3|wav|ogg|flac|aac)$/.test(l),g=[];h&&(g.push(`http://127.0.0.1:${h}/file/${encodeURI(r)}`),u&&g.push(`http://127.0.0.1:${h}/text/${encodeURI(r)}`),p&&(g.push(`http://127.0.0.1:${h}/audio/${encodeURIComponent(a)}`),g.push(`http://127.0.0.1:${h}/audio/${encodeURI(r)}`)));let f=r;/^(assets|src\/assets)\//.test(f)||(f="assets/"+f);const m=[f],b=f.replace(/^assets\//,"src/assets/");b!==f&&m.push(b);const y=e=>(i[o]=e,delete s[o],e),x=e=>{if(!e)return!1;const t=e.slice(0,120).toLowerCase();return t.startsWith("<!doctype html")||t.startsWith("<html")};const w=await async function(e){if(!c||!d)return null;if("undefined"==typeof window||!window.__TAURI__||!window.__TAURI__.fs)return null;const t=window.__TAURI__.fs,n=[e];/^assets\//.test(e)&&!/^src\/assets\//.test(e)&&n.unshift("src/"+e);for(const e of n)try{const n=await t.readTextFile(e).catch(()=>null);if(n&&/^<svg[\s>]/i.test(n.trim())&&!x(n))return{txt:n,path:e}}catch(e){}return null}(r);if(w){if("preview"===n||t.preview){const e=t.preview||120;return y(w.txt.slice(0,e))}return y(w.txt)}if(!h)for(const e of m)try{if(u||"text"===n||"preview"===n){const o=await fetch(e);if(!o.ok)continue;const i=await o.text();if(c&&x(i))continue;if("preview"===n||t.preview){const e=t.preview||120;return y(i.slice(0,e))}return y(i)}if("arraybuffer"===n){const t=await fetch(e);if(!t.ok)continue;return y(await t.arrayBuffer())}if("blob"===n){const t=await fetch(e);if(!t.ok)continue;return y(await t.blob())}if(!(await fetch(e)).ok)continue;return y(e)}catch(e){}if("url"===n){return y(g[0]||m[0])}for(const e of g)try{const o=await fetch(e);if(!o.ok)continue;if("arraybuffer"===n)return y(await o.arrayBuffer());if("blob"===n)return y(await o.blob());if(u||"text"===n||"preview"===n){const e=await o.text();if(c&&x(e))continue;if("preview"===n||t.preview){const n=t.preview||120;return y(e.slice(0,n))}return y(e)}return y(e)}catch(e){}for(const e of m)try{if(u||"text"===n||"preview"===n){const o=await fetch(e);if(!o.ok)continue;const i=await o.text();if(c&&x(i))continue;if("preview"===n||t.preview){const e=t.preview||120;return y(i.slice(0,e))}return y(i)}if("arraybuffer"===n){const t=await fetch(e);if(!t.ok)continue;return y(await t.arrayBuffer())}if("blob"===n){const t=await fetch(e);if(!t.ok)continue;return y(await t.blob())}return y(e)}catch(e){}throw delete s[o],new Error("Introuvable (candidats: "+[...g,...m].join(", ")+")")})();return s[o]=r,r}function a(e){return e}function l(e,t,n="view",o="0px",i="0px",s="100px",r="100px",a=null,l=null,c=null){const d=document.getElementById(n);if(!d||!e)return null;const h=document.createElement("div");h.innerHTML=String(e).trim();const u=h.querySelector("svg");if(!u)return null;const p=t&&String(t).trim()?String(t).trim():"svg_"+Math.random().toString(36).slice(2);try{u.id=p}catch(e){}u.style.position="absolute",u.style.top=o,u.style.left=i;const g="number"==typeof s?s:parseFloat(s)||200,f="number"==typeof r?r:parseFloat(r)||200,m="responsive"===c||"%"===c;try{const e=u.getAttribute("viewBox"),t=parseFloat(u.getAttribute("width"))||null,n=parseFloat(u.getAttribute("height"))||null;if(!e){const e=t&&t>0?t:g,o=n&&n>0?n:f;u.setAttribute("viewBox",`0 0 ${e} ${o}`)}if(u.getAttribute("preserveAspectRatio")||u.setAttribute("preserveAspectRatio","xMidYMid meet"),m){u.hasAttribute("width")&&u.removeAttribute("width"),u.hasAttribute("height")&&u.removeAttribute("height"),u.style.width="100%",u.style.height="100%";try{u.dataset.intuitionResponsive="1"}catch(e){}}else{try{u.setAttribute("width",String(g))}catch(e){}try{u.setAttribute("height",String(f))}catch(e){}u.style.width=g+"px",u.style.height=f+"px"}u.style.overflow="visible",u.style.display="block"}catch(e){}if(a||l){if(u.querySelectorAll("path, rect, circle, ellipse, polygon, polyline, line").forEach(e=>{if(l){try{e.style&&(e.style.stroke=l)}catch(e){}e.setAttribute("stroke",l)}if(a){try{e.style&&(e.style.fill=a)}catch(e){}const t=e.getAttribute("fill");null!==t&&"none"===t.toLowerCase()||e.setAttribute("fill",a),/^url\(/i.test(t||"")&&e.removeAttribute("fill")}}),a){try{u.style&&(u.style.fill=a)}catch(e){}u.getAttribute("fill")||u.setAttribute("fill",a)}if(l){try{u.style&&(u.style.stroke=l)}catch(e){}u.getAttribute("stroke")||u.setAttribute("stroke",l)}}return d.appendChild(u),u.id}function c(e,t,n="view",o="0px",i="0px",s="100px",a="100px",c=null,d=null,h=null){return r(e,{mode:"text"}).then(e=>{const r=document.getElementById(t);return r&&r.parentNode&&r.parentNode.removeChild(r),l(e,t,n,i,o,s,a,c,d,h)}).catch(e=>{"undefined"!=typeof span&&(span.textContent="Erreur: "+e.message)})}function d(e,t,n,o=0,i="ease"){let s=document.getElementById(e);if(!s)return!1;if(s instanceof SVGElement||(s=s.querySelector?s.querySelector("svg"):null),!s)return!1;const r="number"==typeof t?t:parseFloat(t),a=null==n?r:"number"==typeof n?n:parseFloat(n);if(!isFinite(r)||!isFinite(a))return!1;const l=Math.max(0,1e3*("number"==typeof o?o:parseFloat(o)));if(l&&("bounce"===i||"elastic"===i)&&"function"==typeof s.animate){const e="undefined"!=typeof window&&window.getComputedStyle?window.getComputedStyle(s):null,t=(e?parseFloat(e.width):0)||parseFloat(s.getAttribute("width"))||r,n=(e?parseFloat(e.height):0)||parseFloat(s.getAttribute("height"))||a;let o;o="bounce"===i?[{offset:0,width:`${t}px`,height:`${n}px`},{offset:.6,width:1.1*r+"px",height:1.1*a+"px"},{offset:.8,width:.94*r+"px",height:.94*a+"px"},{offset:.92,width:1.03*r+"px",height:1.03*a+"px"},{offset:1,width:`${r}px`,height:`${a}px`}]:[{offset:0,width:`${t}px`,height:`${n}px`},{offset:.5,width:1.25*r+"px",height:1.25*a+"px"},{offset:.7,width:.9*r+"px",height:.9*a+"px"},{offset:.85,width:1.05*r+"px",height:1.05*a+"px"},{offset:1,width:`${r}px`,height:`${a}px`}];const c=s.animate(o,{duration:l,easing:"linear",fill:"forwards"}),d=()=>{s.setAttribute("width",String(r)),s.setAttribute("height",String(a)),s.style.width=`${r}px`,s.style.height=`${a}px`};try{"function"==typeof c.addEventListener?c.addEventListener("finish",d,{once:!0}):c.onfinish=d,setTimeout(d,l+50)}catch(e){c.onfinish=d,setTimeout(d,l+50)}return!0}if(!l)return s.setAttribute("width",String(r)),s.setAttribute("height",String(a)),s.style.width=`${r}px`,s.style.height=`${a}px`,!0;const c=s.style.transition;s.style.transition=`width ${l}ms ${i}, height ${l}ms ${i}`,s.offsetWidth,s.style.width=`${r}px`,s.style.height=`${a}px`;const d=()=>{s.setAttribute("width",String(r)),s.setAttribute("height",String(a)),s.style.transition=c||""};try{s.addEventListener("transitionend",function e(t){"width"!==t.propertyName&&"height"!==t.propertyName||(s.removeEventListener("transitionend",e),d())}),setTimeout(d,l+50)}catch(e){d()}return!0}function h(e,t){let n=document.getElementById(e);if(!n)return!1;if(n instanceof SVGElement||(n=n.querySelector?n.querySelector("svg"):null),!n)return!1;try{n.querySelectorAll("path, rect, circle, ellipse, polygon, polyline").forEach(e=>{e.setAttribute("stroke",t)}),n.getAttribute("stroke")||n.setAttribute("stroke",t)}catch(e){return!1}return!0}function u(e,t){let n=document.getElementById(e);if(!n)return!1;if(n instanceof SVGElement||(n=n.querySelector?n.querySelector("svg"):null),!n)return!1;try{n.querySelectorAll("path, rect, circle, ellipse, polygon, polyline").forEach(e=>{e.setAttribute("fill",t)}),n.getAttribute("fill")||n.setAttribute("fill",t)}catch(e){return!1}return!0}window.dataFetcher=r,window.render_svg=l,window.fetch_and_render_svg=c,window.resize=d,window.strokeColor=h,window.fillColor=u;const p={wait:t,current_platform:o,dataFetcher:r,render_svg:l,fetch_and_render_svg:c,resize:d,strokeColor:h,fillColor:u,sanitizeSVG:a};var g=Object.freeze({__proto__:null,current_platform:o,dataFetcher:r,default:p,fetch_and_render_svg:c,fillColor:u,render_svg:l,resize:d,sanitizeSVG:a,strokeColor:h,wait:t});const f=new Map,m=new Map,b=new WeakMap,y=new WeakMap,x=e=>{if(m.has(e))return m.get(e);const t=e.replace(/([A-Z])/g,"-$1").toLowerCase();return m.set(e,t),t},w=e=>e.startsWith("on"),v=new Set(["draggable","hidden","spellcheck","contenteditable","disabled","checked","readonly"]),C=HTMLElement.prototype.animate,S=(e,t)=>{t&&("string"==typeof t?-1===t.indexOf(" ")?e.classList.add(t):e.classList.add(...t.split(" ")):Array.isArray(t)&&e.classList.add(...t))},k=(e,t={})=>{const n=f.get(e)||{},o="svg"===(i=n.tag||t.tag||e||"div")?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i);var i;const s={...n,...t};if((n.css||t.css)&&("string"==typeof n.css&&"string"==typeof t.css?s.css=n.css+";"+t.css:"object"==typeof n.css&&"object"==typeof t.css?s.css={...n.css,...t.css}:s.css=t.css||n.css),(n.attrs||t.attrs)&&(s.attrs={...n.attrs||{},...t.attrs||{}}),s.mark&&o.setAttribute("data-hyperfactory","true"),s.id&&(o.id=s.id),s.text&&(o.textContent=s.text),s.innerHTML&&(o.innerHTML=s.innerHTML),s.svgSrc&&fetch(s.svgSrc).then(e=>e.text()).then(e=>{o.innerHTML=e}).catch(e=>{console.error(`Erreur lors du chargement du SVG ${s.svgSrc}:`,e)}),S(o,s.class),s.attrs)for(const[e,t]of Object.entries(s.attrs))null==t?o.removeAttribute(e):v.has(e)?t?o.setAttribute(e,""):o.removeAttribute(e):o.setAttribute(e,t);if(s.css)if("string"==typeof s.css)o.style.cssText=s.css;else for(const e in s.css)if(s.css.hasOwnProperty(e)){const t=s.css[e],n=x(e);null==t?o.style.removeProperty(n):o.style.setProperty(n,t)}b.set(o,{});for(const e in s)if(w(e)&&"function"==typeof s[e]){const t=e.slice(2).toLowerCase(),n=s[e];o.addEventListener(t,n),b.get(o)[t]=n}s.children&&s.children.forEach(e=>{const t=k(e.id,e);o.appendChild(t)}),o.$=e=>{if("text"in e&&(o.textContent=e.text),"innerHTML"in e&&(o.innerHTML=e.innerHTML),"svgSrc"in e&&fetch(e.svgSrc).then(e=>e.text()).then(e=>{o.innerHTML=e}).catch(t=>{console.error(`Erreur lors du chargement du SVG ${e.svgSrc}:`,t)}),e.class&&S(o,e.class),e.css)if("string"==typeof e.css)o.style.cssText=e.css;else for(const t in e.css)if(e.css.hasOwnProperty(t)){const n=e.css[t],i=x(t);null==n?o.style.removeProperty(i):o.style.setProperty(i,n)}if(e.attrs)for(const t in e.attrs)if(e.attrs.hasOwnProperty(t)){const n=e.attrs[t];null==n?o.removeAttribute(t):v.has(t)?n?o.setAttribute(t,""):o.removeAttribute(t):o.setAttribute(t,n)}const t=b.get(o);for(const n in e)if(w(n)&&"function"==typeof e[n]){const i=n.slice(2).toLowerCase(),s=e[n];t[i]&&o.removeEventListener(i,t[i]),o.addEventListener(i,s),t[i]=s}return o},o._=o.style;const r=s.parent||"#view",a=()=>{if("string"==typeof r){const e=document.querySelector(r);e?e.appendChild(o):console.warn(`Parent selector "${r}" not found`)}else r.appendChild(o)};return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a(),o.animate=(e,t={})=>C.call(o,e,{duration:t.duration||300,easing:t.easing||"ease",fill:"forwards"}).finished,o.remove=()=>{const e=y.get(o);e&&(e.forEach(e=>e.disconnect()),y.delete(o));const t=b.get(o);if(t){for(const e in t)t.hasOwnProperty(e)&&o.removeEventListener(e,t[e]);b.delete(o)}o.parentNode?.removeChild(o)},o},E=(e,t)=>(f.set(e,t),t);var $={$:k,define:E,batch:(...e)=>{requestAnimationFrame(()=>{e.forEach(e=>{try{e()}catch(e){console.error("Batch operation failed:",e)}})})},observeMutations:(e,t,n={})=>{const o=new MutationObserver(e=>{e.forEach(e=>t(e))});o.observe(e,{attributes:!0,childList:!0,subtree:!0,...n}),y.has(e)||y.set(e,[]),y.get(e).push(o)}};E("slider-container",{tag:"div",class:"hs-slider",css:{position:"relative",display:"inline-block",userSelect:"none",touchAction:"none"}}),E("slider-track",{tag:"div",class:"hs-slider-track",css:{position:"absolute",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden",zIndex:"1",boxSizing:"border-box"}}),E("slider-progression",{tag:"div",class:"hs-slider-progression",css:{position:"absolute",backgroundColor:"#007bff",borderRadius:"0",zIndex:"2"}}),E("slider-handle",{tag:"div",class:"hs-slider-handle",css:{position:"absolute",backgroundColor:"#fff",border:"2px solid #007bff",borderRadius:"50%",cursor:"pointer",zIndex:"20",boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}}),E("slider-label",{tag:"div",class:"hs-slider-label",css:{position:"absolute",fontSize:"12px",fontFamily:"system-ui, sans-serif",color:"#666",whiteSpace:"nowrap"}}),E("slider-tick",{tag:"div",class:"hs-slider-tick",css:{position:"absolute",backgroundColor:"#ccc",pointerEvents:"none"}});const L={horizontal:{container:{width:"200px",height:"20px"},track:{width:"100%",height:"4px",top:"50%",transform:"translateY(-50%)"},progression:{height:"100%",left:"0",top:"0",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"},handle:{width:"16px",height:"16px",top:"50%"},label:{top:"25px",transform:"translateX(-50%)"}},vertical:{container:{width:"20px",height:"200px"},track:{width:"4px",height:"100%",left:"50%",transform:"translateX(-50%)"},progression:{width:"100%",bottom:"0",left:"0",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px"},handle:{width:"16px",height:"16px",left:"50%"},label:{left:"25px",transform:"translateY(-50%)"}},circular:{container:{width:"120px",height:"120px"},track:{width:"100%",height:"100%",borderRadius:"50%",border:"4px solid #e0e0e0"},progression:{display:"none"},handle:{width:"20px",height:"20px"},label:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}},M={sm:{scale:.8},md:{scale:1},lg:{scale:1.2},xl:{scale:1.5}},A=(e={})=>{const{type:t="horizontal",min:n=0,max:o=100,value:i=50,step:s=1,onChange:r,onInput:a,skin:l={},id:c,disabled:d=!1,showLabel:h=!0,showTicks:u=!1,ticks:p=[],size:g="md",radius:f,handleOffset:m=0,dragMin:b=null,dragMax:y=null,...x}=e,w=c||`slider_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,v=Math.max(n,Math.min(o,i)),C="circular"===t;let S={...L[t]?.container||{},...M[g]||{}},E={...L[t]?.track||{}},$={...L[t]?.progression||{}},A={...L[t]?.handle||{}},I={...L[t]?.label||{}};if(C&&f){const e=2*f;S.width=`${e}px`,S.height=`${e}px`}l.container&&(S={...S,...l.container}),l.track&&(E={...E,...l.track}),l.progression&&($={...$,...l.progression}),l.handle&&(A={...A,...l.handle}),l.label&&(I={...I,...l.label}),d&&(S.opacity="0.6",S.pointerEvents="none");const T=k("slider-container",{id:w,css:S,...x}),D=k("slider-track",{id:`${w}_track`,css:E});let z;C&&D.$({css:{width:"100%",height:"100%",top:"0",left:"0"}}),C||(z=k("slider-progression",{id:`${w}_progression`,css:$}),D.appendChild(z));const _=k("slider-handle",{id:`${w}_handle`,css:A});let R;h&&(R=k("slider-label",{id:`${w}_label`,text:v.toString(),css:I})),u&&p.length>0&&p.forEach((e,i)=>{const s=(e-n)/(o-n)*100,r=k("slider-tick",{id:`${w}_tick_${i}`,css:{...l.tick||{},..."horizontal"===t?{left:`${s}%`,top:"12px",width:"2px",height:"6px"}:{top:100-s+"%",left:"12px",width:"6px",height:"2px"}}});T.appendChild(r)}),T.appendChild(D),!C&&z&&D.appendChild(z),T.appendChild(_),R&&T.appendChild(R);let O=!1,q=v,j=m;const H=e=>{const i=Math.max(n,Math.min(o,e));if(C){const e=(i-n)/(o-n)*100;let t=0;null!==b||null!==y?i>=P&&i<=U?t=(i-P)/(U-P)*100:i>U&&(t=100):t=e;const s=(e/100*360-90)*Math.PI/180,r=window.getComputedStyle(D),a=50-(parseFloat(r.borderWidth)||parseFloat(r.borderTopWidth)||6)/T.offsetWidth*100+j,c=50+a*Math.cos(s),d=50+a*Math.sin(s);if(_.$({css:{left:`${c}%`,top:`${d}%`,transform:"translate(-50%, -50%)",zIndex:"15"}}),D.querySelector("svg")){const e=D.querySelector(".progress-circle");if(e){const i=42,s=2*Math.PI*i;if(null!==b||null!==y){const i=t/100*(s*((U-P)/(o-n))),r=s*((P-n)/(o-n));e.style.strokeDasharray=`${i} ${s-i}`,e.style.strokeDashoffset=-r}else{const n=s-t/100*s;e.style.strokeDasharray=s,e.style.strokeDashoffset=n}}}else{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 100 100"),e.style.cssText="\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          transform: rotate(-90deg);\n          pointer-events: none;\n          z-index: 2;\n        ";const i=42,s=2*Math.PI*i,r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.style.cssText="\n          fill: none;\n          stroke: #e0e0e0;\n          stroke-width: 6;\n          opacity: 0.3;\n        ",r.setAttribute("cx","50"),r.setAttribute("cy","50"),r.setAttribute("r",i.toString());const a=l.progression||{},c=document.createElementNS("http://www.w3.org/2000/svg","circle");if(c.classList.add("progress-circle"),null!==b||null!==y){const e=t/100*(s*((U-P)/(o-n))),i=s*((P-n)/(o-n));c.style.cssText=`\n            fill: none;\n            stroke: ${a.stroke||$.backgroundColor||"#007bff"};\n            stroke-width: ${a.strokeWidth||"6"};\n            stroke-dasharray: ${e} ${s-e};\n            stroke-dashoffset: ${-i};\n            stroke-linecap: ${a.strokeLinecap||"butt"};\n            opacity: ${a.opacity||"1"};\n          `}else c.style.cssText=`\n            fill: none;\n            stroke: ${a.stroke||$.backgroundColor||"#007bff"};\n            stroke-width: ${a.strokeWidth||"6"};\n            stroke-dasharray: ${s};\n            stroke-dashoffset: ${s-t/100*s};\n            stroke-linecap: ${a.strokeLinecap||"butt"};\n            opacity: ${a.opacity||"1"};\n          `;c.setAttribute("cx","50"),c.setAttribute("cy","50"),c.setAttribute("r",i.toString()),e.appendChild(r),e.appendChild(c),D.appendChild(e)}}else{const e=(i-n)/(o-n)*100;"vertical"===t?(_.$({css:{top:100-e+"%",transform:"translate(-50%, -50%)"}}),z&&z.$({css:{height:`${e}%`}})):(_.$({css:{left:`${e}%`,transform:"translate(-50%, -50%)"}}),z&&z.$({css:{width:`${e}%`}}))}R&&R.$({text:Math.round(i).toString()}),q=i},W=(e,i)=>{if(C){const t=T.getBoundingClientRect(),s=e-(t.left+t.width/2),r=i-(t.top+t.height/2);let a=Math.atan2(r,s)*(180/Math.PI);a+=90,a<0&&(a+=360);const l=n+a/360*(o-n);return C?Math.max(P,Math.min(U,l)):l}if("vertical"===t){const e=D.getBoundingClientRect(),t=1-(i-e.top)/e.height;return n+Math.max(0,Math.min(1,t))*(o-n)}{const t=D.getBoundingClientRect(),i=(e-t.left)/t.width;return n+Math.max(0,Math.min(1,i))*(o-n)}},P=null!==b?b:n,U=null!==y?y:o;P<n&&console.warn(`dragMin (${P}) ne peut pas Ãªtre infÃ©rieur Ã  min (${n})`),U>o&&console.warn(`dragMax (${U}) ne peut pas Ãªtre supÃ©rieur Ã  max (${o})`);const N=e=>{if(d)return;O=!0;const t=W(e.clientX,e.clientY),n=Math.round(t/s)*s;H(n),a&&a(q),document.addEventListener("mousemove",B),document.addEventListener("mouseup",F),e.preventDefault()},B=e=>{if(!O)return;const t=W(e.clientX,e.clientY),n=Math.round(t/s)*s;H(n),a&&a(q),e.preventDefault()},F=()=>{O&&(O=!1,r&&r(q),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",F))},Y=e=>{if(d)return;const t=e.touches[0];N({clientX:t.clientX,clientY:t.clientY,preventDefault:()=>e.preventDefault()})};return _.addEventListener("mousedown",N),D.addEventListener("mousedown",N),_.addEventListener("touchstart",Y,{passive:!1}),D.addEventListener("touchstart",Y,{passive:!1}),document.addEventListener("touchmove",e=>{if(!O)return;const t=e.touches[0];B({clientX:t.clientX,clientY:t.clientY,preventDefault:()=>e.preventDefault()})},{passive:!1}),document.addEventListener("touchend",()=>{F()}),H(v),T.setValue=e=>(H(e),r&&r(q),T),T.getValue=()=>q,T.setRange=(e,t)=>(n=e,o=t,H(q),T),T.setDisabled=e=>(d=e,T.$({css:{opacity:e?"0.6":"1",pointerEvents:e?"none":"auto"}}),T),T.setHandleOffset=e=>(C&&(j=e,H(q)),T),T.getHandleOffset=()=>j,T};E("badge-element",{tag:"span",class:"hs-badge",css:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.5px"}});const I=(e={})=>{const{text:t="Badge",variant:n="primary",css:o={},onclick:i,...s}=e,r={primary:{backgroundColor:"#007bff",color:"white"},success:{backgroundColor:"#28a745",color:"white"},warning:{backgroundColor:"#ffc107",color:"#212529"},danger:{backgroundColor:"#dc3545",color:"white"},info:{backgroundColor:"#17a2b8",color:"white"},light:{backgroundColor:"#f8f9fa",color:"#212529",border:"1px solid #dee2e6"},dark:{backgroundColor:"#343a40",color:"white"}};return k("badge-element",{text:t,css:{...r[n]||r.primary,...o,cursor:i?"pointer":"default"},onclick:i||null,...s})},T={squirrel_design:{name:"Material Design Green",description:"Style Material Design avec couleurs vertes",css:{fontFamily:"Roboto, sans-serif",fontSize:"12px",fontWeight:"300",textTransform:"uppercase",letterSpacing:"0.3px",borderRadius:"3px",border:"none",padding:"8px 9px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minWidth:"30px",height:"19px"},onStyle:{backgroundColor:"rgba(99,99,99,1)",boxShadow:"0 4px 8px rgba(0,0,0,0.6)",color:"yellow"},offStyle:{backgroundColor:"rgba(69,69,69,1)",boxShadow:"0 2px 4px rgba(0,0,0,0.3)",color:"orange"}},material_design_blue:{name:"Material Design Blue",description:"Style Material Design avec couleurs bleues",css:{fontFamily:"Roboto, sans-serif",fontSize:"14px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",borderRadius:"4px",border:"none",padding:"8px 16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",color:"white",minWidth:"64px",height:"36px"},onStyle:{backgroundColor:"#1976D2",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},offStyle:{backgroundColor:"#757575",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},hover:{transform:"translateY(-1px)",boxShadow:"0 6px 12px rgba(0,0,0,0.3)"},active:{transform:"translateY(0)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}},material_design_green:{name:"Material Design Green",description:"Style Material Design avec couleurs vertes",css:{fontFamily:"Roboto, sans-serif",fontSize:"14px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",borderRadius:"4px",border:"none",padding:"8px 16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",color:"white",minWidth:"64px",height:"36px"},onStyle:{backgroundColor:"#388E3C",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},offStyle:{backgroundColor:"#9E9E9E",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}},bootstrap_primary:{name:"Bootstrap Primary",description:"Style Bootstrap avec couleur primaire",css:{fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"400",borderRadius:"6px",border:"1px solid transparent",padding:"6px 12px",cursor:"pointer",transition:"all 0.15s ease-in-out",color:"white",minWidth:"auto",height:"auto"},onStyle:{backgroundColor:"#0056b3",borderColor:"#004085"},offStyle:{backgroundColor:"#6c757d",borderColor:"#5a6268"},hover:{backgroundColor:"#0056b3",borderColor:"#004085"}},flat_modern:{name:"Flat Modern",description:"Design plat moderne avec couleurs vives",css:{fontFamily:"Inter, sans-serif",fontSize:"13px",fontWeight:"600",borderRadius:"8px",border:"none",padding:"10px 20px",cursor:"pointer",transition:"all 0.2s ease",color:"white",boxShadow:"none"},onStyle:{backgroundColor:"#e74c3c",transform:"scale(0.98)"},offStyle:{backgroundColor:"#95a5a6",transform:"scale(1)"}},neumorphism_light:{name:"Neumorphism Light",description:"Style neumorphisme avec thÃ¨me clair",css:{fontFamily:"SF Pro Display, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"12px",border:"none",padding:"12px 24px",cursor:"pointer",transition:"all 0.3s ease"},onStyle:{backgroundColor:"#d1d9e6",boxShadow:"inset 4px 4px 8px #c5cad1, inset -4px -4px 8px #ffffff",color:"#2c3e50"},offStyle:{backgroundColor:"#e0e5ec",boxShadow:"6px 6px 12px #c5cad1, -6px -6px 12px #ffffff",color:"#7f8c8d"}},glass_blur:{name:"Glass Blur",description:"Effet de verre avec flou",css:{fontFamily:"Poppins, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"15px",padding:"10px 20px",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)",color:"white"},onStyle:{backgroundColor:"rgba(46, 213, 115, 0.3)",borderColor:"rgba(46, 213, 115, 0.4)",boxShadow:"0 8px 32px rgba(46, 213, 115, 0.2)"},offStyle:{backgroundColor:"rgba(255, 71, 87, 0.3)",borderColor:"rgba(255, 71, 87, 0.4)",boxShadow:"0 8px 32px rgba(255, 71, 87, 0.2)"}},retro_80s:{name:"Retro 80s",description:"Style rÃ©tro annÃ©es 80",css:{fontFamily:"Orbitron, monospace",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"1px",borderRadius:"0",border:"2px solid #ff006e",padding:"8px 16px",cursor:"pointer",transition:"all 0.2s ease"},onStyle:{backgroundColor:"#ff006e",color:"#000",boxShadow:"0 0 20px rgba(255, 0, 110, 0.8)"},offStyle:{backgroundColor:"#333",color:"#666",borderColor:"#666",boxShadow:"0 0 5px rgba(102, 102, 102, 0.3)"}}};E("button-container",{tag:"button",class:"hs-button",text:"",css:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"8px 16px",border:"none",borderRadius:"4px",fontSize:"14px",fontFamily:"system-ui, sans-serif",cursor:"pointer",transition:"all 0.2s ease",outline:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserDrag:"none"},attrs:{type:"button"}}),E("button-icon",{tag:"span",class:"hs-button-icon",css:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:"6px",fontSize:"16px",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",WebkitUserDrag:"none"},attrs:{draggable:"false"}}),E("button-text",{tag:"span",class:"hs-button-text",css:{fontSize:"inherit",fontWeight:"400",lineHeight:"1",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",WebkitUserDrag:"none"},attrs:{draggable:"false"}}),E("button-badge",{tag:"span",class:"hs-button-badge",css:{position:"absolute",top:"-6px",right:"-6px",minWidth:"18px",height:"18px",padding:"0 4px",borderRadius:"9px",backgroundColor:"#dc3545",color:"white",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",WebkitUserDrag:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"600",lineHeight:"1"}});const D={primary:{backgroundColor:"#007bff",color:"white",borderColor:"#007bff"},secondary:{backgroundColor:"#6c757d",color:"white",borderColor:"#6c757d"},success:{backgroundColor:"#28a745",color:"white",borderColor:"#28a745"},danger:{backgroundColor:"#dc3545",color:"white",borderColor:"#dc3545"},warning:{backgroundColor:"#ffc107",color:"#212529",borderColor:"#ffc107"},outline:{backgroundColor:"transparent",borderWidth:"2px"},ghost:{backgroundColor:"transparent",border:"none",boxShadow:"none"}},z={xs:{padding:"4px 8px",fontSize:"11px"},sm:{padding:"6px 12px",fontSize:"12px"},md:{padding:"8px 16px",fontSize:"14px"},lg:{padding:"12px 24px",fontSize:"16px"},xl:{padding:"16px 32px",fontSize:"18px"}},_=(e={})=>{const{text:t="",icon:n,badge:o,variant:i="default",size:s="md",onClick:r,skin:a={},id:l,disabled:c=!1,template:d,templates:h,onText:u,offText:p,onAction:g,offAction:f,onStyle:m={},offStyle:b={},initialState:y=!1,onStateChange:x,states:w,cycleMode:v="forward",...C}=e,S=l||`btn_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,E=d||h;let $=e;E&&($=((e,t)=>{const n=T[t];if(!n)return console.warn(`Template "${t}" non trouvÃ©. Templates disponibles:`,Object.keys(T)),e;const o={...e,css:{...n.css,...e.css}};return n.onStyle&&!e.onStyle?o.onStyle=n.onStyle:n.onStyle&&e.onStyle&&(o.onStyle={...n.onStyle,...e.onStyle}),n.offStyle&&!e.offStyle?o.offStyle=n.offStyle:n.offStyle&&e.offStyle&&(o.offStyle={...n.offStyle,...e.offStyle}),o._templateName=t,o._templateInfo=n,o})(e,E));const L=void 0!==u||void 0!==p||m&&Object.keys(m).length>0||b&&Object.keys(b).length>0||"function"==typeof g||"function"==typeof f||!0===$.toggle,M=w&&w.length>0;let A=y,I=0,_=1,R=t,O={};if(L)R=A?u||t:p||t;else if(M){const e=w[0];R=e.text||t,O={...e.css}}let q={...D[i]||{},...z[s]||{}};if(E&&$.css?q={...q,...$.css}:E&&T[E]?q={...q,...T[E].css}:$.css&&(q={...q,...$.css}),a.container&&(q={...q,...a.container}),L&&E&&T[E]){const e=A?T[E].onStyle||{}:T[E].offStyle||{},t=A?$.onStyle||{}:$.offStyle||{};e&&Object.keys(e).length>0&&(q={...q,...e}),t&&Object.keys(t).length>0&&(q={...q,...t})}else if(L){const e=A?$.onStyle||{}:$.offStyle||{};Object.keys(e).length>0&&(q={...q,...e})}else Object.keys(O).length>0&&(q={...q,...O});c&&(q.opacity="0.6",q.cursor="not-allowed",q.pointerEvents="none");const j=e=>{if(null==e)return null;if("number"==typeof e)return e;const t=String(e).match(/^(-?\d+(?:\.\d+)?)(px)?$/);return t?Number(t[1]):null},H=j(q.width||$.width||$.css&&$.css.width),W=j(q.height||$.height||$.css&&$.css.height);(null!==H&&H<=32||null!==W&&W<=32)&&(q.boxSizing="border-box",q.padding="0",q.minWidth="0",q.minHeight="0",null!==H&&(q.width=String(H)+"px"),null!==W&&(q.height=String(W)+"px"),$.forceText||(R=""),q.fontSize="0px",q.overflow="hidden",q.display="inline-flex",q.alignItems="center",q.justifyContent="center");const P=e=>{if(!c)if(L){A=!A;const e=A?u:p;e&&N.updateText(e);const t=A?E&&T[E]&&T[E].onStyle||{}:E&&T[E]&&T[E].offStyle||{},n=A?$.onStyle||{}:$.offStyle||{},o={...E&&T[E]?T[E].css:{},...$.css,...t,...n};if(N&&N.id&&/_toggle$/.test(N.id)){const e=N.dataset.baseToggleSize?parseFloat(N.dataset.baseToggleSize):null;let t=1;try{window.getIntuitionMasterScale&&(t=window.getIntuitionMasterScale())}catch(e){}if(e){const n=Math.round(e*t)+"px";o.width=n,o.height=n}else{const e=N.style.width,t=N.style.height;e&&void 0===o.width&&(o.width=e),t&&void 0===o.height&&(o.height=t)}const n=N.style.borderRadius;n&&void 0===o.borderRadius&&(o.borderRadius=n)}N.$({css:o}),A&&N._handlers.onAction?N._handlers.onAction(A,N):!A&&N._handlers.offAction&&N._handlers.offAction(A,N),x&&x(A,N)}else if(M){I=function(e,t,n,o=1){switch(n){case"backward":return(e-1+t)%t;case"ping-pong":const n=e+o;return n>=t?t-2:n<0?1:n;default:return(e+1)%t}}(I,w.length,v,_),"ping-pong"===v&&(I===w.length-1?_=-1:0===I&&(_=1));const e=w[I];if(e.text&&N.updateText(e.text),e.css){const t=E&&T[E]?T[E].css:{};N.$({css:{...t,...e.css,...$.css}})}if(e.icon){const t=N.querySelector(".hs-button-icon");t&&(t.textContent=e.icon)}e.action&&e.action(e,I,N),x&&x(e,I,N)}else N._handlers.onClick&&N._handlers.onClick(e,N)},U={};Object.keys(q).forEach(e=>{"function"!=typeof q[e]&&"define_method"!==e&&"inspect"!==e&&(U[e]=q[e])});const N=k("button-container",{id:S,css:U,attrs:{disabled:c},onClick:P,...C});N.addEventListener("dragstart",e=>e.preventDefault()),N.addEventListener("selectstart",e=>e.preventDefault());try{N.style.setProperty("outline","none"),N.style.setProperty("border","none")}catch(e){}if(Object.keys(U).forEach(e=>{if("function"!=typeof U[e]&&"define_method"!==e&&"inspect"!==e){const t=e.replace(/([A-Z])/g,"-$1").toLowerCase();N.style.setProperty(t,U[e])}}),N._config=$,N._handlers={onClick:r,onAction:g,offAction:f},E&&T[E]&&((e,t)=>{t.hover&&(e.addEventListener("mouseenter",()=>{e.$({css:t.hover})}),e.addEventListener("mouseleave",()=>{const n=e.getState?e.getState():null,o=()=>{const t={};if(e&&/_toggle$/.test(e.id)){let n=1;try{window.getIntuitionMasterScale&&(n=window.getIntuitionMasterScale())}catch(e){}const o=e.dataset.baseToggleSize?parseFloat(e.dataset.baseToggleSize):null;if(o){const e=Math.round(o*n)+"px";t.width=e,t.height=e}else e.style.width&&(t.width=e.style.width),e.style.height&&(t.height=e.style.height);e.style.borderRadius&&(t.borderRadius=e.style.borderRadius)}return t};if(null!==n){const i=n?e._config.onStyle:e._config.offStyle,s={...t.css,...i,...o()};e.$({css:s})}else{const n={...t.css,...o()};e.$({css:n})}})),t.active&&(e.addEventListener("mousedown",()=>{e.$({css:t.active})}),e.addEventListener("mouseup",()=>{const n=e.getState?e.getState():null,o=()=>{const t={};if(e&&/_toggle$/.test(e.id)){let n=1;try{window.getIntuitionMasterScale&&(n=window.getIntuitionMasterScale())}catch(e){}const o=e.dataset.baseToggleSize?parseFloat(e.dataset.baseToggleSize):null;if(o){const e=Math.round(o*n)+"px";t.width=e,t.height=e}else e.style.width&&(t.width=e.style.width),e.style.height&&(t.height=e.style.height);e.style.borderRadius&&(t.borderRadius=e.style.borderRadius)}return t};if(null!==n){const i=n?e._config.onStyle:e._config.offStyle,s={...t.css,...i,...o()};e.$({css:s})}else{const n={...t.css,...o()};e.$({css:n})}}))})(N,T[E]),n){const e=k("button-icon",{id:`${S}_icon`,text:n,css:a.icon||{}});R||e.$({css:{marginRight:"0"}}),N.appendChild(e)}if(R)if(N.querySelector(".hs-button-text")){const e=k("button-text",{id:`${S}_text`,text:R,css:a.text||{}});N.appendChild(e)}else N.textContent=R;if(void 0!==o){const e=k("button-badge",{id:`${S}_badge`,text:o.toString(),css:a.badge||{}});N.appendChild(e)}if(N.updateText=e=>{const t=N.querySelector(".hs-button-text");return t?t.textContent=e:N.textContent=e,N},N.updateBadge=e=>{const t=N.querySelector(".hs-button-badge");if(t)t.textContent=e.toString();else if(void 0!==e){const t=k("button-badge",{id:`${S}_badge_new`,text:e.toString(),css:a.badge||{}});N.appendChild(t)}return N},N.setVariant=e=>{const t=D[e]||{};return N.$({css:t}),N},N.setDisabled=e=>(N.disabled=e,N.$({css:{opacity:e?"0.6":"1",cursor:e?"not-allowed":"pointer",pointerEvents:e?"none":"auto"}}),N),N.getTemplate=()=>$._templateName||null,N.getTemplateInfo=()=>$._templateInfo||null,n){const e=k("button-icon",{id:`${S}_icon`,text:n,css:a.icon||{}});R||e.$({css:{marginRight:"0"}}),N.appendChild(e)}if(R)if(N.querySelector(".hs-button-text")){const e=k("button-text",{id:`${S}_text`,text:R,css:a.text||{}});N.appendChild(e)}else N.textContent=R;if(void 0!==o){const e=k("button-badge",{id:`${S}_badge`,text:o.toString(),css:a.badge||{}});N.appendChild(e)}return N.updateText=e=>{const t=N.querySelector(".hs-button-text");return t?t.textContent=e:N.textContent=e,N},N.updateBadge=e=>{const t=N.querySelector(".hs-button-badge");if(t)t.textContent=e.toString();else if(void 0!==e){const t=k("button-badge",{id:`${S}_badge_new`,text:e.toString(),css:a.badge||{}});N.appendChild(t)}return N},N.setVariant=e=>{const t=D[e]||{};return N.$({css:t}),N},N.setDisabled=e=>(N.disabled=e,N.$({css:{opacity:e?"0.6":"1",cursor:e?"not-allowed":"pointer",pointerEvents:e?"none":"auto"}}),N),L&&(N.toggle=()=>(P(),N),N.setState=e=>(A!==e&&P(),N),N.getState=()=>A,N.setOnState=()=>(A||P(),N),N.setOffState=()=>(A&&P(),N)),M&&(N.nextState=()=>(P(),N),N.setStateIndex=e=>{if(e>=0&&e<w.length&&e!==I){I=e;const t=w[I];if(t.text&&N.updateText(t.text),t.css&&N.$({css:t.css}),t.icon){const e=N.querySelector(".hs-button-icon");e&&(e.textContent=t.icon)}t.action&&t.action(t,I,N),x&&x(t,I,N)}return N},N.getCurrentState=()=>w[I],N.getCurrentStateIndex=()=>I,N.getStates=()=>w),Object.defineProperty(N,"onClick",{get(){return this._handlers.onClick},set(e){this._handlers.onClick=e,console.log("âœ… onClick handler mis Ã  jour")},enumerable:!0,configurable:!0}),Object.defineProperty(N,"onAction",{get(){return this._handlers.onAction},set(e){this._handlers.onAction=e,console.log("âœ… onAction handler mis Ã  jour")},enumerable:!0,configurable:!0}),Object.defineProperty(N,"offAction",{get(){return this._handlers.offAction},set(e){this._handlers.offAction=e,console.log("âœ… offAction handler mis Ã  jour")},enumerable:!0,configurable:!0}),N};_.templates=T,_.getTemplateList=()=>Object.keys(T),_.getTemplate=e=>T[e],_.addTemplate=(e,t)=>(T[e]=t,_),_.listTemplates=()=>(console.table(Object.entries(T).map(([e,t])=>({nom:e,description:t.description||"Aucune description",famille:t.name||e}))),_),_.removeTemplate=e=>(T[e]?delete T[e]:console.warn(`âš ï¸ Template "${e}" introuvable`),_);const R=_;function O(e,t={}){const{onDragEnter:n=()=>{},onDragOver:o=()=>{},onDragLeave:i=()=>{},onDrop:s=()=>{},acceptTypes:r=[],hoverClass:a="drop-hover",activeClass:l="drop-active",acceptClass:c="drop-accept",rejectClass:d="drop-reject"}=t,h="string"==typeof e?document.querySelector(e):e;if(!h)return;let u=0;const p=e=>{e.preventDefault(),u++,1===u&&(h.classList.add(a),n(e,h))},g=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move",o(e,h)},f=e=>{e.preventDefault(),u--,0===u&&(h.classList.remove(a,c,d),i(e,h))},m=e=>{e.preventDefault(),e.stopPropagation(),u=0,h.classList.remove(a,c,d);const t={};try{const n=e.dataTransfer.getData("application/json");n&&Object.assign(t,JSON.parse(n))}catch(e){console.warn("Erreur parsing des donnÃ©es de drop:",e)}t.text=e.dataTransfer.getData("text/plain");let n=null;t.dragId&&(n=document.querySelector(`[data-drag-id="${t.dragId}"]`)),n&&(n.setAttribute("data-drop-successful","true"),n.setAttribute("data-moved","true"),n._markDropSuccessful&&n._markDropSuccessful(),console.log("ðŸŽ¯ Marked source element as successfully dropped")),s(e,h,t,n)};return h.addEventListener("dragenter",p),h.addEventListener("dragover",g),h.addEventListener("dragleave",f),h.addEventListener("drop",m),()=>{h.removeEventListener("dragenter",p),h.removeEventListener("dragover",g),h.removeEventListener("dragleave",f),h.removeEventListener("drop",m),h.classList.remove(a,l,c,d)}}function q(e,t={}){const{onDragStart:n=()=>{},onDragMove:o=()=>{},onDragEnd:i=()=>{},cursor:s="move",constrainToParent:r=!1,bounds:a=null,rotationFactor:l=0,scaleFactor:c=0,enableHTML5:d=!0,transferData:h={},ghostImage:u=null,dragStartClass:p="dragging",onHTML5DragStart:g=()=>{},onHTML5DragEnd:f=()=>{},onDropDetection:m=()=>{}}=t;e.style.cursor=s,e.style.userSelect="none",d&&(e.draggable=!0);let b=null,y=null,x=!1;if(d){let t=null,n=null,o=!1;n=t=>{p&&e.classList.add(p),o=!1,u&&t.dataTransfer.setDragImage(u,0,0),t.dataTransfer.effectAllowed="move";let n={};h&&(n={...h,dragStartTime:Date.now(),dragId:h.dragId||Math.random().toString(36).substr(2,9)},t.dataTransfer.setData("application/json",JSON.stringify(n))),t.dataTransfer.setData("text/plain",e.textContent||""),e.setAttribute("data-dragging","true"),e.setAttribute("data-drag-id",n.dragId||"unknown"),e.removeAttribute("data-moved"),e.removeAttribute("data-drop-successful"),g(t,e)},t=t=>{if(p&&e.classList.remove(p),o||"true"===e.getAttribute("data-drop-successful"))return console.log("Drop successful - ignoring dragend completely"),e.removeAttribute("data-dragging"),e.removeAttribute("data-drag-id"),e.removeAttribute("data-moved"),void e.removeAttribute("data-drop-successful");console.log("No successful drop - restoring element"),e.removeAttribute("data-dragging"),e.removeAttribute("data-drag-id"),e.removeAttribute("data-moved"),e.removeAttribute("data-drop-successful"),f(t,e)},e.addEventListener("dragstart",n),e.addEventListener("dragend",t),e._markDropSuccessful=()=>{o=!0,e.setAttribute("data-drop-successful","true")}}const w=t=>{if(d&&0===t.button&&t.target.draggable)return;t.preventDefault(),t.stopPropagation(),x=!0;const s=e.style.transition;e.style.transition="none";const r=e.getBoundingClientRect();var a,l;b={x:r.left,y:r.top,transform:e.style.transform||"",transition:s},a=t.clientX,l=t.clientY,y=e.cloneNode(!0),y.style.position="fixed",y.style.left=a-30+"px",y.style.top=l-20+"px",y.style.width=e.offsetWidth+"px",y.style.height=e.offsetHeight+"px",y.style.opacity="0.7",y.style.transform="scale(0.95)",y.style.zIndex="9999",y.style.pointerEvents="none",y.style.boxShadow="0 8px 16px rgba(0,0,0,0.3)",y.style.borderRadius="8px",y.style.transition="none",y.style.border="2px solid rgba(255,255,255,0.5)",document.body.appendChild(y),p&&e.classList.add(p);const c=t.clientX,h=t.clientY;n(e,c,h,0,0);const u=t=>{if(!x)return;y&&(y.style.left=t.clientX-30+"px",y.style.top=t.clientY-20+"px");const n=t.clientX-c,i=t.clientY-h;o(e,t.clientX,t.clientY,n,i)},g=t=>{if(!x)return;x=!1,p&&e.classList.remove(p),b&&(e.style.transition=b.transition);let n=!1;if(m)try{m(e,t.clientX,t.clientY),n=!0}catch(e){}v(),i(e,t.clientX,t.clientY,t.clientX-c,t.clientY-h),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",g),document.removeEventListener("mouseleave",g)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",g),document.addEventListener("mouseleave",g)};function v(){y&&y.parentNode&&(y.parentNode.removeChild(y),y=null)}return e.addEventListener("mousedown",w),()=>{e.removeEventListener("mousedown",w),e.style.cursor="",e.style.userSelect="",e.draggable=!1,v(),b&&(e.style.transform=b.transform,e.style.transition=b.transition)}}function j(e,t={}){const{onDragStart:n=()=>{},onDragMove:o=()=>{},onDragEnd:i=()=>{},cursor:s="move",constrainToParent:r=!1,bounds:a=null,rotationFactor:l=0,scaleFactor:c=0}=t;e.style.cursor=s,e.style.userSelect="none";let d=0,h=0;const u=t=>{let r=!1,a=!1,u=t.clientX,p=t.clientY;const g=t.clientX,f=t.clientY,m=e.style.cursor,b=t=>{const i=t.clientX-u,m=t.clientY-p,b=t.clientX-g,y=t.clientY-f,x=Math.sqrt(b*b+y*y);if(!a&&x>5&&(a=!0,r=!0,e.style.cursor="grab"===s?"grabbing":s,n(e,g,f,d,h)),!r)return;d+=i,h+=m;let w=[`translate(${d}px, ${h}px)`];if(l>0){const e=d,t=h;if(Math.abs(e)>5||Math.abs(t)>5){const n=Math.atan2(t,e)*(180/Math.PI)*l;w.push(`rotate(${n}deg)`)}}if(c>0){const e=1+Math.sqrt(d*d+h*h)*c*.001;w.push(`scale(${Math.min(e,1.5)})`)}e.style.transform=w.join(" "),o(e,d,h,i,m),u=t.clientX,p=t.clientY,t.preventDefault()},y=t=>{e.style.cursor=m,a&&i(e,d,h,d,h),r=!1,a=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",y)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",y),t.preventDefault()};return e.addEventListener("mousedown",u),()=>{e.removeEventListener("mousedown",u),e.style.cursor="",e.style.userSelect="",e.style.transform=""}}function H(e="draggable-box",t={}){const{content:n="Drag me!",css:o={},attrs:i={},parent:s=null,cursor:r="grab",rotationFactor:a=0,scaleFactor:l=0,constrainToParent:c=!1,bounds:d=null,onDragStart:h=()=>{},onDragMove:u=()=>{},onDragEnd:p=()=>{},dragActiveClass:g="dragging",dragHoverShadow:f="0 8px 16px rgba(0,0,0,0.2)"}=t,m=k(e,{content:n,css:o,attrs:i,parent:s}),b=j(m,{cursor:r,rotationFactor:a,scaleFactor:l,constrainToParent:c,bounds:d,onDragStart:(e,t,n,o,i)=>{g&&e.classList.add(g),f&&(e.style.boxShadow=f),h(e,t,n,o,i)},onDragMove:(e,t,n,o,i)=>{u(e,t,n,o,i)},onDragEnd:(e,t,n,o,i)=>{g&&e.classList.remove(g),f&&(e.style.boxShadow=""),p(e,t,n,o,i)}});return m.destroyDraggable=b,m}R.templates=_.templates,R.getTemplateList=_.getTemplateList,R.getTemplate=_.getTemplate,R.addTemplate=_.addTemplate,R.listTemplates=_.listTemplates,R.removeTemplate=_.removeTemplate,E("draggable-box",{tag:"div",class:"hs-draggable",css:{position:"absolute",width:"100px",height:"100px",backgroundColor:"#3498db",border:"2px solid #2980b9",borderRadius:"8px",cursor:"grab",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",transition:"box-shadow 0.2s ease"}}),E("drag-handle",{tag:"div",class:"hs-drag-handle",css:{position:"absolute",top:"0",left:"0",right:"0",height:"30px",backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"8px 8px 0 0",cursor:"grab",display:"flex",alignItems:"center",justifyContent:"center"}}),E("drop-zone",{tag:"div",class:"hs-drop-zone",css:{position:"relative",minHeight:"100px",border:"2px dashed #bdc3c7",borderRadius:"8px",backgroundColor:"#ecf0f1",display:"flex",alignItems:"center",justifyContent:"center",color:"#7f8c8d",fontSize:"14px",transition:"all 0.3s ease",margin:"10px"}}),E("drop-zone-active",{css:{borderColor:"#3498db",backgroundColor:"#ebf3fd",color:"#2980b9"}}),E("drop-zone-hover",{css:{borderColor:"#27ae60",backgroundColor:"#e8f5e8",color:"#27ae60",transform:"scale(1.02)"}}),E("drop-zone-reject",{css:{borderColor:"#e74c3c",backgroundColor:"#fdf2f2",color:"#c0392b"}});H.makeDraggable=j;class W{constructor(e={}){this.config={id:e.id||`list-${Date.now()}`,items:e.items||[],position:{x:0,y:0,...e.position},size:{width:300,height:400,...e.size},spacing:{vertical:e.spacing?.vertical??4,horizontal:e.spacing?.horizontal??0,itemPadding:e.spacing?.itemPadding??16,marginTop:e.spacing?.marginTop??0,marginBottom:e.spacing?.marginBottom??0,...e.spacing},attach:e.attach||"body",itemStyle:{fontSize:e.itemStyle?.fontSize??"14px",fontWeight:e.itemStyle?.fontWeight??"400",lineHeight:e.itemStyle?.lineHeight??"1.4",textColor:e.itemStyle?.textColor??"#212121",backgroundColor:e.itemStyle?.backgroundColor??"#ffffff",borderRadius:e.itemStyle?.borderRadius??"8px",...e.itemStyle},states:{hover:{backgroundColor:"#f5f5f5",boxShadow:"0 2px 4px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.24)",transform:"translateY(-1px)",...e.states?.hover},selected:{backgroundColor:"#1976d2",color:"#ffffff",boxShadow:"0 4px 8px rgba(25,118,210,0.3)",transform:"translateY(-1px)",...e.states?.selected},...e.states},containerStyle:e.containerStyle||{},selectable:!1!==e.selectable,multiSelect:e.multiSelect||!1,elevation:e.elevation??2,rippleEffect:!1!==e.rippleEffect,debug:e.debug||!1},this.itemsMap=new Map,this.itemStates=new Map,this.itemElements=new Map,this.selectedItems=new Set,this.callbacks={onItemClick:e.onItemClick||null,onItemSelect:e.onItemSelect||null,onItemHover:e.onItemHover||null,onItemLeave:e.onItemLeave||null},this.container=null,this.isInitialized=!1,this.init()}init(){try{this.createContainer(),this.createItems(),this.setupEventListeners(),this.isInitialized=!0,this.config.debug}catch(e){console.error(`âŒ Erreur lors de l'initialisation de List "${this.config.id}":`,e)}}createContainer(){const e="string"==typeof this.config.attach?document.querySelector(this.config.attach):this.config.attach;if(!e)throw new Error(`Point d'attachement "${this.config.attach}" non trouvÃ©`);this.container=document.createElement("div"),this.container.id=this.config.id,this.container.className="list-container",this.applyContainerStyles(),e.appendChild(this.container)}applyContainerStyles(){const e=this.getElevationShadow(this.config.elevation),t={...{position:"absolute",left:`${this.config.position.x}px`,top:`${this.config.position.y}px`,width:`${this.config.size.width}px`,height:`${this.config.size.height}px`,overflow:"auto",background:"#ffffff",borderRadius:"12px",padding:"8px",boxShadow:e,border:"none",fontFamily:'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},...this.config.containerStyle};Object.assign(this.container.style,t)}getElevationShadow(e){const t={0:"none",1:"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)",2:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",3:"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)",4:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)",5:"0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)"};return t[e]||t[2]}createItems(){this.config.items.forEach((e,t)=>{const n=this.createItem(e,t);this.container.appendChild(n)})}createItem(e,t){const n=document.createElement("div"),o=e.id||`item-${t}`;return n.id=o,n.className="list-item",n.textContent=e.content||e.text||`Ã‰lÃ©ment ${t+1}`,this.itemsMap.set(o,e),this.itemElements.set(o,n),this.itemStates.set(o,"default"),this.applyItemStyles(n,e),n}applyItemStyles(e,t){const n={...{padding:`${this.config.spacing.itemPadding}px`,marginTop:`${this.config.spacing.marginTop}px`,marginBottom:`${this.config.spacing.vertical}px`,marginLeft:`${this.config.spacing.horizontal}px`,marginRight:`${this.config.spacing.horizontal}px`,fontSize:this.config.itemStyle.fontSize,fontWeight:this.config.itemStyle.fontWeight,lineHeight:this.config.itemStyle.lineHeight,color:this.config.itemStyle.textColor,fontFamily:"inherit",background:this.config.itemStyle.backgroundColor,borderRadius:this.config.itemStyle.borderRadius,border:"none",boxShadow:"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0.0, 0.2, 1)",position:"relative",overflow:"hidden",userSelect:"none"},...this.config.itemStyle.default||{},...t.style||{}};Object.assign(e.style,n),this.config.rippleEffect&&this.addRippleEffect(e)}addRippleEffect(e){e.addEventListener("click",t=>{const n=document.createElement("span"),o=e.getBoundingClientRect(),i=Math.max(o.width,o.height),s=t.clientX-o.left-i/2,r=t.clientY-o.top-i/2;if(n.style.cssText=`\n        position: absolute;\n        width: ${i}px;\n        height: ${i}px;\n        left: ${s}px;\n        top: ${r}px;\n        background: rgba(255, 255, 255, 0.6);\n        border-radius: 50%;\n        transform: scale(0);\n        animation: ripple 0.6s linear;\n        pointer-events: none;\n        z-index: 1;\n      `,!document.getElementById("ripple-styles")){const e=document.createElement("style");e.id="ripple-styles",e.textContent="\n          @keyframes ripple {\n            to {\n              transform: scale(4);\n              opacity: 0;\n            }\n          }\n        ",document.head.appendChild(e)}e.appendChild(n),setTimeout(()=>n.remove(),600)})}setupEventListeners(){this.container.addEventListener("click",e=>{const t=e.target.closest(".list-item");t&&this.handleItemClick(t,e)}),this.container.addEventListener("mouseover",e=>{const t=e.target.closest(".list-item");t&&this.handleItemHover(t)}),this.container.addEventListener("mouseout",e=>{const t=e.target.closest(".list-item");t&&this.handleItemLeave(t)})}handleItemClick(e,t){const n=e.id,o=this.itemsMap.get(n),i=Array.from(this.itemElements.values()).indexOf(e);this.config.selectable&&this.toggleSelection(n),this.callbacks.onItemClick&&this.callbacks.onItemClick(o,i,t)}handleItemHover(e){const t=e.id;if(this.applyState(t,"hover"),this.callbacks.onItemHover){const e=this.itemsMap.get(t);this.callbacks.onItemHover(e)}}handleItemLeave(e){const t=e.id;if("hover"===this.itemStates.get(t)){const e=this.selectedItems.has(t);this.applyState(t,e?"selected":"default")}if(this.callbacks.onItemLeave){const e=this.itemsMap.get(t);this.callbacks.onItemLeave(e)}}applyState(e,t){const n=this.itemElements.get(e);if(!n)return;const o=this.config.states[t]||{};if("default"===t){const t=this.itemsMap.get(e);this.applyItemStyles(n,t)}else Object.assign(n.style,o);this.itemStates.set(e,t)}toggleSelection(e){const t=this.selectedItems.has(e);if(this.config.multiSelect||t||this.selectedItems.forEach(e=>{this.selectedItems.delete(e),this.applyState(e,"default")}),t?(this.selectedItems.delete(e),this.applyState(e,"default")):(this.selectedItems.add(e),this.applyState(e,"selected")),this.callbacks.onItemSelect){const n=this.itemsMap.get(e);this.callbacks.onItemSelect(n,!t)}}addItem(e){const t=this.config.items.length;this.config.items.push(e);const n=this.createItem(e,t);return this.container.appendChild(n),e.id||`item-${t}`}removeItem(e){const t=this.itemElements.get(e);t&&(t.remove(),this.itemElements.delete(e),this.itemsMap.delete(e),this.itemStates.delete(e),this.selectedItems.delete(e))}getSelectedItems(){return Array.from(this.selectedItems).map(e=>this.itemsMap.get(e))}clearSelection(){this.selectedItems.forEach(e=>{this.applyState(e,"default")}),this.selectedItems.clear()}updateSpacing(e){this.config.spacing={...this.config.spacing,...e},this.itemElements.forEach((e,t)=>{const n=this.itemsMap.get(t);this.applyItemStyles(e,n)})}updateTextStyle(e){this.config.itemStyle={...this.config.itemStyle,...e},this.itemElements.forEach((e,t)=>{const n=this.itemsMap.get(t);this.applyItemStyles(e,n)})}destroy(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.itemsMap.clear(),this.itemElements.clear(),this.itemStates.clear(),this.selectedItems.clear(),this.isInitialized=!1}}function P(e={}){const t=new W(e);return t.init(),t.container}class U{constructor(e={}){this.config={id:e.id||`matrix-${Date.now()}`,grid:{x:4,y:4,...e.grid},size:{width:400,height:400,...e.size},position:{x:0,y:0,...e.position},spacing:{horizontal:8,vertical:8,external:16,...e.spacing},attach:e.attach||"body",cells:e.cells||{},states:e.states||{},containerStyle:e.containerStyle||{},debug:e.debug||!1,responsive:!1!==e.responsive,autoResize:!1!==e.autoResize,maintainAspectRatio:e.maintainAspectRatio||!1},this.cellsMap=new Map,this.cellStates=new Map,this.cellElements=new Map,this.selectedCells=new Set,this.callbacks={onCellClick:e.onCellClick||null,onCellDoubleClick:e.onCellDoubleClick||null,onCellLongClick:e.onCellLongClick||null,onCellHover:e.onCellHover||null,onCellLeave:e.onCellLeave||null,onCellStateChange:e.onCellStateChange||null,onSelectionChange:e.onSelectionChange||null,onResize:e.onResize||null},this.container=null,this.longClickTimer=null,this.resizeObserver=null,this.isInitialized=!1,this.init()}init(){try{this.createContainer(),this.createCells(),this.setupEventListeners(),this.setupResizeObserver(),this.applyInitialStates(),this.isInitialized=!0,this.config.debug}catch(e){console.error(`âŒ Erreur lors de l'initialisation de Matrix "${this.config.id}":`,e)}}createContainer(){const e="string"==typeof this.config.attach?document.querySelector(this.config.attach):this.config.attach;if(!e)throw new Error(`Point d'attachement "${this.config.attach}" non trouvÃ©`);this.container=document.createElement("div"),this.container.id=this.config.id,this.container.className="matrix-container",this.applyContainerStyles(),e.appendChild(this.container)}applyContainerStyles(){const e={position:"absolute",left:`${this.config.position.x}px`,top:`${this.config.position.y}px`,display:"grid",gridTemplateColumns:`repeat(${this.config.grid.x}, 1fr)`,gridTemplateRows:`repeat(${this.config.grid.y}, 1fr)`,gap:`${this.config.spacing.vertical}px ${this.config.spacing.horizontal}px`,background:"#f8f9fa",borderRadius:"12px",border:"1px solid #dee2e6",fontFamily:"system-ui, -apple-system, sans-serif",userSelect:"none",boxSizing:"border-box"};this.config.autoResize?Object.assign(e,{position:"relative",left:"auto",top:"auto",width:"100%",height:"100%",padding:`${this.config.spacing.external}px`}):Object.assign(e,{width:`${this.config.size.width}px`,height:`${this.config.size.height}px`,padding:`${this.config.spacing.external}px`});const t={...e,...this.config.containerStyle};Object.assign(this.container.style,t)}createCells(){for(let e=0;e<this.config.grid.y;e++)for(let t=0;t<this.config.grid.x;t++)this.createCell(t,e)}createCell(e,t){const n=`${e},${t}`,o=this.config.cells[n]||{},i=this.config.cells.default||{},s=o.id||`${this.config.id}-cell-${e}-${t}`,r=document.createElement("div");r.id=s,r.className="matrix-cell",r.tabIndex=0,r.setAttribute("data-x",e),r.setAttribute("data-y",t),r.setAttribute("data-cell-id",s),r.setAttribute("role","button"),r.setAttribute("aria-label",`Cellule ${e}, ${t}`);const a=o.content||i.content||"";r.textContent=a;const l={display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff",border:"1px solid #dee2e6",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",minHeight:"40px",transition:"all 0.2s ease",userSelect:"none",...i.style,...o.style};Object.assign(r.style,l),this.cellsMap.set(n,{id:s,x:e,y:t,content:a,element:r,config:o}),this.cellElements.set(n,r);const c=new Set(["normal"]);o.states&&o.states.forEach(e=>c.add(e)),this.cellStates.set(n,c),this.config.debug&&r.setAttribute("title",`Cellule (${e}, ${t}) - ID: ${s}`),this.container.appendChild(r)}applyInitialStates(){this.cellStates.forEach((e,t)=>{e.forEach(e=>{if("normal"!==e&&this.config.states[e]){const[n,o]=t.split(",").map(Number);this.applyCellStateStyle(n,o,e)}})})}setupEventListeners(){this.container.addEventListener("click",this.handleCellClick.bind(this)),this.container.addEventListener("dblclick",this.handleCellDoubleClick.bind(this)),this.container.addEventListener("mousedown",this.handleCellMouseDown.bind(this)),this.container.addEventListener("mouseup",this.handleCellMouseUp.bind(this)),this.container.addEventListener("mouseenter",this.handleCellHover.bind(this),!0),this.container.addEventListener("mouseleave",this.handleCellLeave.bind(this),!0),this.container.addEventListener("keydown",this.handleCellKeyDown.bind(this))}handleCellClick(e){const t=this.getCellFromEvent(e);if(!t)return;const{x:n,y:o,id:i,element:s}=t;this.callbacks.onCellClick&&this.callbacks.onCellClick(s,n,o,i,e)}handleCellDoubleClick(e){const t=this.getCellFromEvent(e);if(!t)return;const{x:n,y:o,id:i,element:s}=t;this.callbacks.onCellDoubleClick&&this.callbacks.onCellDoubleClick(s,n,o,i,e)}handleCellMouseDown(e){const t=this.getCellFromEvent(e);if(!t)return;const{x:n,y:o,id:i,element:s}=t;this.longClickTimer=setTimeout(()=>{this.callbacks.onCellLongClick&&this.callbacks.onCellLongClick(s,n,o,i,e)},500)}handleCellMouseUp(e){this.longClickTimer&&(clearTimeout(this.longClickTimer),this.longClickTimer=null)}handleCellHover(e){const t=this.getCellFromEvent(e);if(!t||!e.target.classList.contains("matrix-cell"))return;const{x:n,y:o,id:i,element:s}=t;this.config.states.hover&&this.applyStylesToElement(s,this.config.states.hover,!0),this.callbacks.onCellHover&&this.callbacks.onCellHover(s,n,o,i,e)}handleCellLeave(e){const t=this.getCellFromEvent(e);if(!t||!e.target.classList.contains("matrix-cell"))return;const{x:n,y:o,id:i,element:s}=t;this.reapplyCellStyles(n,o),this.callbacks.onCellLeave&&this.callbacks.onCellLeave(s,n,o,i,e)}handleCellKeyDown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.handleCellClick(e))}getCellFromEvent(e){const t=e.target.closest(".matrix-cell");if(!t)return null;const n=parseInt(t.getAttribute("data-x")),o=parseInt(t.getAttribute("data-y")),i=`${n},${o}`;return{x:n,y:o,id:t.getAttribute("data-cell-id"),element:t,cellData:this.cellsMap.get(i)}}getCellState(e,t){const n=`${e},${t}`,o=this.cellStates.get(n);if(!o||0===o.size)return null;return Array.from(o).find(e=>"normal"!==e)||"normal"}getCellStates(e,t){const n=`${e},${t}`,o=this.cellStates.get(n);return o?Array.from(o):[]}hasCellState(e,t,n){const o=`${e},${t}`,i=this.cellStates.get(o);return!!i&&i.has(n)}setCellState(e,t,n,o=!0){const i=`${e},${t}`,s=this.cellStates.get(i)||new Set,r=this.cellsMap.get(i);if(!r)return;const a=s.has(n);o&&!a?(s.add(n),this.applyCellStateStyle(e,t,n)):!o&&a&&(s.delete(n),this.removeCellStateStyle(e,t,n)),this.cellStates.set(i,s),"selected"===n&&(o?this.selectedCells.add(i):this.selectedCells.delete(i),this.triggerSelectionChange()),this.callbacks.onCellStateChange&&a!==o&&this.callbacks.onCellStateChange(r.element,e,t,n,o)}addCellState(e,t,n){this.setCellState(e,t,n,!0)}removeCellState(e,t,n){this.setCellState(e,t,n,!1)}toggleCellState(e,t,n){const o=this.hasCellState(e,t,n);return this.setCellState(e,t,n,!o),!o}clearCellStates(e,t){const n=`${e},${t}`;this.cellsMap.get(n)&&(this.resetCellStyle(e,t),this.cellStates.set(n,new Set(["normal"])),this.selectedCells.delete(n),this.triggerSelectionChange())}applyCellStateStyle(e,t,n){const o=`${e},${t}`,i=this.cellsMap.get(o),s=this.config.states[n];i&&s&&this.applyStylesToElement(i.element,s,!0)}removeCellStateStyle(e,t,n){const o=`${e},${t}`,i=this.cellsMap.get(o);if(!i)return;const s=this.config.states[n];s&&Object.keys(s).forEach(e=>{const t=e.replace(/([A-Z])/g,"-$1").toLowerCase();i.element.style.removeProperty(t)}),this.reapplyCellStyles(e,t)}reapplyCellStyles(e,t){const n=`${e},${t}`,o=this.cellsMap.get(n),i=this.cellStates.get(n);o&&i&&(this.resetCellStyle(e,t),i.forEach(e=>{"normal"!==e&&this.config.states[e]&&this.applyStylesToElement(o.element,this.config.states[e],!0)}))}resize(e,t){void 0!==e&&void 0!==t&&(this.config.size.width=e,this.config.size.height=t,this.config.autoResize||(this.container.style.width=`${e}px`,this.container.style.height=`${t}px`)),this.updateCellSizes(),this.config.debug}setAutoResize(e){const t=this.config.autoResize;this.config.autoResize=e,e&&!t?(this.applyContainerStyles(),this.setupResizeObserver()):!e&&t&&(this.disconnectResizeObserver(),this.applyContainerStyles())}disconnectResizeObserver(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}fitToParent(e){const t="string"==typeof e?document.querySelector(e):e;if(!t)return void console.error("âŒ Ã‰lÃ©ment parent non trouvÃ©");t.appendChild(this.container),this.setAutoResize(!0);const n=t.getBoundingClientRect();this.handleResize({contentRect:n})}autoSizeCells(e={}){const{minWidth:t=40,minHeight:n=40,padding:o=8,fontSize:i=null}=e;this.cellsMap.forEach((e,s)=>{const r=e.element,a=r.textContent||"";if(a.length>0){const e=document.createElement("div");e.style.cssText=`\n          position: absolute;\n          top: -9999px;\n          left: -9999px;\n          visibility: hidden;\n          white-space: nowrap;\n          font-family: ${r.style.fontFamily||"inherit"};\n          font-size: ${i||r.style.fontSize||"14px"};\n          font-weight: ${r.style.fontWeight||"inherit"};\n        `,e.textContent=a,document.body.appendChild(e);const s=e.offsetWidth,l=e.offsetHeight;document.body.removeChild(e);const c=Math.max(s+2*o,t),d=Math.max(l+2*o,n);r.style.width=`${c}px`,r.style.height=`${d}px`}}),this.config.debug}fitToContent(e={}){this.autoSizeCells(e);let t=0,n=0;this.cellsMap.forEach(e=>{const o=e.element.getBoundingClientRect();t=Math.max(t,o.width),n=Math.max(n,o.height)});const o=t*this.config.grid.x+this.config.spacing.horizontal*(this.config.grid.x-1)+2*this.config.spacing.external,i=n*this.config.grid.y+this.config.spacing.vertical*(this.config.grid.y-1)+2*this.config.spacing.external;this.resize(o,i)}setupResizeObserver(){if(!this.config.autoResize||!window.ResizeObserver)return;this.resizeObserver=new ResizeObserver(e=>{for(let t of e)this.handleResize(t)});const e=this.container.parentElement;e&&this.resizeObserver.observe(e)}handleResize(e){if(!this.config.autoResize)return;const{width:t,height:n}=e.contentRect;this.config.debug,this.config.size.width=t,this.config.size.height=n,this.updateCellSizes(),this.callbacks.onResize&&this.callbacks.onResize(t,n)}updateCellSizes(){if(!this.config.autoResize)return;const e=this.container.getBoundingClientRect(),t=e.width-2*this.config.spacing.external,n=e.height-2*this.config.spacing.external,o=(t-this.config.spacing.horizontal*(this.config.grid.x-1))/this.config.grid.x,i=(n-this.config.spacing.vertical*(this.config.grid.y-1))/this.config.grid.y;if(this.config.maintainAspectRatio){const e=Math.min(o,i);this.cellsMap.forEach(t=>{t.element.style.width=`${e}px`,t.element.style.height=`${e}px`})}this.config.debug}applyStylesToElement(e,t,n=!1){Object.entries(t).forEach(([t,o])=>{if("string"==typeof o||"number"==typeof o){const i=t.replace(/([A-Z])/g,"-$1").toLowerCase();e.style.setProperty(i,String(o),n?"important":"")}})}camelToKebab(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}getCellsByState(e){const t=[];return this.cellStates.forEach((n,o)=>{if(n.has(e)){const[e,n]=o.split(",").map(Number),i=this.cellsMap.get(o);t.push({x:e,y:n,id:i.id,element:i.element})}}),t}getCellsWithAnyState(e){const t=[];return this.cellStates.forEach((n,o)=>{if(e.some(e=>n.has(e))){const[e,i]=o.split(",").map(Number),s=this.cellsMap.get(o);t.push({x:e,y:i,id:s.id,element:s.element,states:Array.from(n)})}}),t}getCellsWithAllStates(e){const t=[];return this.cellStates.forEach((n,o)=>{if(e.every(e=>n.has(e))){const[e,i]=o.split(",").map(Number),s=this.cellsMap.get(o);t.push({x:e,y:i,id:s.id,element:s.element,states:Array.from(n)})}}),t}getStateCount(e){let t=0;return this.cellStates.forEach(n=>{n.has(e)&&t++}),t}getAllStates(){const e=new Set;return this.cellStates.forEach(t=>{t.forEach(t=>e.add(t))}),Array.from(e)}getStateDistribution(){const e={};return this.cellStates.forEach(t=>{t.forEach(t=>{e[t]=(e[t]||0)+1})}),e}findCells(e){const t=[];return this.cellsMap.forEach((n,o)=>{const[i,s]=o.split(",").map(Number);let r=!0;if(e.state&&!this.hasCellState(i,s,e.state)&&(r=!1),void 0!==e.hasContent){const t=n.content&&n.content.trim().length>0;e.hasContent!==t&&(r=!1)}e.position&&(e.position.x&&(void 0!==e.position.x.min&&i<e.position.x.min&&(r=!1),void 0!==e.position.x.max&&i>e.position.x.max&&(r=!1)),e.position.y&&(void 0!==e.position.y.min&&s<e.position.y.min&&(r=!1),void 0!==e.position.y.max&&s>e.position.y.max&&(r=!1))),r&&t.push({x:i,y:s,id:n.id,element:n.element,content:n.content,states:this.getCellStates(i,s)})}),t}getCellsInRange(e,t,n,o){const i=[],s=Math.min(e,n),r=Math.max(e,n),a=Math.min(t,o),l=Math.max(t,o);for(let e=a;e<=l;e++)for(let t=s;t<=r;t++){const n=`${t},${e}`,o=this.cellsMap.get(n);o&&i.push({x:t,y:e,id:o.id,element:o.element})}return i}getCellsInRow(e){const t=[];for(let n=0;n<this.config.grid.x;n++){const o=`${n},${e}`,i=this.cellsMap.get(o);i&&t.push({x:n,y:e,id:i.id,element:i.element})}return t}getCellsInColumn(e){const t=[];for(let n=0;n<this.config.grid.y;n++){const o=`${e},${n}`,i=this.cellsMap.get(o);i&&t.push({x:e,y:n,id:i.id,element:i.element})}return t}compareCellStates(e,t,n,o){const i=new Set(this.getCellStates(e,t)),s=new Set(this.getCellStates(n,o));return{same:[...i].every(e=>s.has(e))&&[...s].every(e=>i.has(e)),common:[...i].filter(e=>s.has(e)),different1:[...i].filter(e=>!s.has(e)),different2:[...s].filter(e=>!i.has(e))}}findSimilarCells(e,t){const n=new Set(this.getCellStates(e,t)),o=[];return this.cellStates.forEach((i,s)=>{const[r,a]=s.split(",").map(Number);if(r===e&&a===t)return;if(i.size===n.size&&[...i].every(e=>n.has(e))){const e=this.cellsMap.get(s);o.push({x:r,y:a,id:e.id,element:e.element})}}),o}groupCellsByState(){const e={};return this.cellStates.forEach((t,n)=>{const[o,i]=n.split(",").map(Number),s=this.cellsMap.get(n);t.forEach(t=>{e[t]||(e[t]=[]),e[t].push({x:o,y:i,id:s.id,element:s.element})})}),e}getCellId(e,t){const n=`${e},${t}`,o=this.cellsMap.get(n);return o?o.id:null}getCellContent(e,t){const n=`${e},${t}`,o=this.cellsMap.get(n);return o?o.content:null}setCellContent(e,t,n){const o=`${e},${t}`,i=this.cellsMap.get(o);i&&(i.content=n,i.element.textContent=n)}getCellStyle(e,t){const n=`${e},${t}`,o=this.cellsMap.get(n);return o?o.element.style:null}setCellStyle(e,t,n){const o=`${e},${t}`,i=this.cellsMap.get(o);i&&Object.assign(i.element.style,n)}resetCellStyle(e,t){const n=`${e},${t}`,o=this.cellsMap.get(n);if(o){const e=o.config,t={...{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff",border:"1px solid #dee2e6",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",minHeight:"40px",transition:"all 0.2s ease",userSelect:"none"},...(this.config.cells.default||{}).style,...e.style};o.element.removeAttribute("style"),this.applyStylesToElement(o.element,t,!1)}}getSelectedCells(){const e=[];return this.selectedCells.forEach(t=>{const[n,o]=t.split(",").map(Number),i=this.cellsMap.get(t);e.push({x:n,y:o,id:i.id,element:i.element})}),e}clearSelection(){Array.from(this.selectedCells).forEach(e=>{const[t,n]=e.split(",").map(Number);this.removeCellState(t,n,"selected")})}triggerSelectionChange(){this.callbacks.onSelectionChange&&this.callbacks.onSelectionChange(this.getSelectedCells())}getTotalCells(){return this.config.grid.x*this.config.grid.y}getCell(e,t){const n=`${e},${t}`,o=this.cellsMap.get(n);return o?o.element:null}getCellData(e,t){const n=`${e},${t}`;return this.cellsMap.get(n)}destroy(){try{this.longClickTimer&&(clearTimeout(this.longClickTimer),this.longClickTimer=null),this.disconnectResizeObserver(),this.container&&(this.container.removeEventListener("click",this.handleCellClick),this.container.removeEventListener("dblclick",this.handleCellDoubleClick),this.container.removeEventListener("mousedown",this.handleCellMouseDown),this.container.removeEventListener("mouseup",this.handleCellMouseUp),this.container.removeEventListener("mouseenter",this.handleCellHover),this.container.removeEventListener("mouseleave",this.handleCellLeave),this.container.removeEventListener("keydown",this.handleCellKeyDown),this.container.parentNode&&this.container.parentNode.removeChild(this.container)),this.cellsMap.clear(),this.cellStates.clear(),this.cellElements.clear(),this.selectedCells.clear(),this.callbacks={}}catch(e){console.error(`âŒ Erreur lors de la destruction de Matrix "${this.config.id}":`,e)}}}function N(e){return new U(e)}function B(e={}){const t={id:e.id||`menu-${Date.now()}`,position:{x:0,y:0,...e.position},size:{width:"auto",height:"auto",...e.size},attach:e.attach||"body",layout:{direction:"horizontal",wrap:!1,justify:"flex-start",align:"center",gap:"8px",...e.layout},content:e.content||[],style:{display:"flex",position:"relative",backgroundColor:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"8px",padding:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontFamily:"system-ui, -apple-system, sans-serif",...e.style},responsive:{enabled:e.responsive?.enabled??!0,breakpoints:{mobile:{maxWidth:"768px",...e.responsive?.breakpoints?.mobile},tablet:{maxWidth:"1024px",...e.responsive?.breakpoints?.tablet},...e.responsive?.breakpoints},...e.responsive},callbacks:{onItemClick:e.callbacks?.onItemClick||e.onItemClick||null,onItemHover:e.callbacks?.onItemHover||e.onItemHover||null,onDropdownOpen:e.callbacks?.onDropdownOpen||e.onDropdownOpen||null,onDropdownClose:e.callbacks?.onDropdownClose||e.onDropdownClose||null,...e.callbacks},debug:e.debug||!1};function n(e,t){switch(e.type){case"item":return o(e,t);case"group":return function(e,t){const o=document.createElement("div");o.id=e.id||`menu-group-${t}`,o.className="menu-group";const i={display:"flex",alignItems:"center",gap:e.layout?.gap||"8px",...e.style};"vertical"===e.layout?.direction&&(i.flexDirection="column");Object.assign(o.style,i),e.items&&e.items.forEach((e,t)=>{const i=n(e,t);i&&o.appendChild(i)});return o}(e,t);case"separator":return function(e,t){const n=document.createElement("div");n.id=e.id||`menu-separator-${t}`,n.className="menu-separator";const o={borderTop:"1px solid #e0e0e0",margin:"4px 0",...e.style};return Object.assign(n.style,o),n}(e,t);default:return o({...e},t)}}function o(e,o){const s=document.createElement(e.href?"a":"div");s.id=e.id||`menu-item-${o}`,s.className="menu-item",s.setAttribute("data-menu-id",e.id||`menu-item-${o}`),e.content&&(e.content.text?s.textContent=e.content.text:e.content.html&&(s.innerHTML=e.content.html)),e.href&&"A"===s.tagName&&(s.href=e.href);const r={display:"flex",alignItems:"center",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",textDecoration:"none",color:"#333333",fontSize:"14px",fontWeight:"400",userSelect:"none",...e.style};return Object.assign(s.style,r),function(e,n){e.addEventListener("click",o=>{o.preventDefault();const s=document.getElementById(`${e.id}-dropdown`);s&&i(s),t.callbacks.onItemClick&&t.callbacks.onItemClick(n.id||e.id,o)}),e.addEventListener("mouseenter",o=>{!function(e,t){t.states?.hover?Object.assign(e.style,t.states.hover):(e.style.backgroundColor="#f8f9fa",e.style.transform="translateY(-1px)")}(e,n),t.callbacks.onItemHover&&t.callbacks.onItemHover(n.id||e.id,o)}),e.addEventListener("mouseleave",t=>{!function(e,t){t.states?.hover?Object.keys(t.states.hover).forEach(t=>{e.style[t]=""}):(e.style.backgroundColor="",e.style.transform="");t.style&&Object.assign(e.style,t.style)}(e,n)})}(s,e),e.dropdown&&function(e,t){const o=document.createElement("div");o.id=`${e.id}-dropdown`,o.className="menu-dropdown";const i={position:"absolute",top:"100%",left:"0",minWidth:"200px",backgroundColor:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:"4px",zIndex:"1000",opacity:"0",visibility:"hidden",transform:"translateY(-10px)",transition:"all 0.3s ease",...t.style};Object.assign(o.style,i),t.items&&t.items.forEach((e,t)=>{const i=n(e,t);i&&o.appendChild(i)});document.body.appendChild(o),function(e,t,n){const o=()=>{const o=e.getBoundingClientRect(),i=n.offset||{x:0,y:4};t.style.position="fixed",t.style.left=`${o.left+i.x}px`,t.style.top=`${o.bottom+i.y}px`};o(),window.addEventListener("scroll",o),window.addEventListener("resize",o)}(e,o,t)}(s,e.dropdown),s}function i(e){"1"===e.style.opacity?(e.style.opacity="0",e.style.visibility="hidden",e.style.transform="translateY(-10px)"):(e.style.opacity="1",e.style.visibility="visible",e.style.transform="translateY(0)")}function s(e,n){const o=t.responsive.breakpoints[n];if(o)if(o.style&&Object.assign(e.style,o.style),o.showHamburger){const t=e.querySelector("#hamburger-icon"),n=e.querySelector("#nav-links");t&&(t.style.display="flex"),n&&(n.style.display="none")}else{const t=e.querySelector("#hamburger-icon"),n=e.querySelector("#nav-links");t&&(t.style.display="none"),n&&(n.style.display="flex")}}const r=function(){const e=document.createElement("nav");e.id=t.id,e.className="professional-menu";const n=document.querySelector(t.attach);return n?(function(e){const n={};void 0===t.position.x&&void 0===t.position.y||(n.position="absolute",void 0!==t.position.x&&(n.left=`${t.position.x}px`),void 0!==t.position.y&&(n.top=`${t.position.y}px`));const o={};"auto"!==t.size.width&&(o.width="string"==typeof t.size.width?t.size.width:`${t.size.width}px`);"auto"!==t.size.height&&(o.height="string"==typeof t.size.height?t.size.height:`${t.size.height}px`);t.size.maxWidth&&(o.maxWidth="string"==typeof t.size.maxWidth?t.size.maxWidth:`${t.size.maxWidth}px`);t.size.minHeight&&(o.minHeight="string"==typeof t.size.minHeight?t.size.minHeight:`${t.size.minHeight}px`);const i={flexDirection:"vertical"===t.layout.direction?"column":"row",flexWrap:t.layout.wrap?"wrap":"nowrap",justifyContent:t.layout.justify,alignItems:t.layout.align,gap:t.layout.gap},s={...t.style,...n,...o,...i};Object.assign(e.style,s)}(e),n.appendChild(e),t.debug&&console.log(`ðŸ“¦ Container menu crÃ©Ã© et attachÃ© Ã  "${t.attach}"`),e):(console.error(`âŒ Point d'attachement "${t.attach}" introuvable`),null)}();return r?(function(e){t.content.forEach((t,o)=>{const i=n(t,o);i&&e.appendChild(i)})}(r),function(e){if(!t.responsive.enabled)return;const n=()=>{const n=window.innerWidth,o=t.responsive.breakpoints;o.mobile&&n<=o.mobile.maxWidth?s(e,"mobile"):o.tablet&&n<=o.tablet.maxWidth?s(e,"tablet"):s(e,"desktop")};window.addEventListener("resize",n),n()}(r),document.addEventListener("click",e=>{if(!r.contains(e.target)){document.querySelectorAll(".menu-dropdown").forEach(e=>{"1"===e.style.opacity&&i(e)})}}),t.debug&&console.log(`âœ… Menu "${t.id}" crÃ©Ã© avec succÃ¨s`),r):null}function F(e={}){const t={content:e.content||"Minimal Component",style:e.style||{},onClick:e.onClick||null},n=document.createElement("div");n.className="hs-minimal",n.textContent=t.content;return Object.assign(n.style,{padding:"12px",margin:"8px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRadius:"4px",fontFamily:"system-ui, sans-serif"},t.style),t.onClick&&(n.addEventListener("click",t.onClick),n.style.cursor="pointer"),document.body.appendChild(n),n}E("table-container",{tag:"div",class:"hs-table",css:{position:"relative",display:"flex",flexDirection:"column",border:"1px solid #dee2e6",borderRadius:"6px",backgroundColor:"#ffffff",overflow:"hidden",fontFamily:"system-ui, sans-serif",fontSize:"14px"}}),E("table-header",{tag:"div",class:"hs-table-header",css:{display:"flex",flexShrink:0,borderBottom:"2px solid #dee2e6",backgroundColor:"#343a40"}}),E("table-header-cell",{tag:"div",class:"hs-table-header-cell",css:{padding:"12px",backgroundColor:"#343a40",color:"#ffffff",fontWeight:"600",fontSize:"14px",borderRight:"1px solid #495057",cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"space-between"}}),E("table-body",{tag:"div",class:"hs-table-body",css:{flex:1,overflowY:"auto",overflowX:"hidden"}}),E("table-row",{tag:"div",class:"hs-table-row",css:{display:"flex",borderBottom:"1px solid #dee2e6",backgroundColor:"#ffffff",transition:"all 0.2s ease"}}),E("table-cell",{tag:"div",class:"hs-table-cell",css:{padding:"8px 12px",borderRight:"1px solid #dee2e6",backgroundColor:"#ffffff",color:"#212529",fontSize:"13px",display:"flex",alignItems:"center"}});const Y={default:{headerStyle:{backgroundColor:"#343a40",color:"#ffffff"},cellStyle:{backgroundColor:"#ffffff",color:"#212529"},alternateRowStyle:{backgroundColor:"#f8f9fa"}},modern:{headerStyle:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#ffffff"},cellStyle:{backgroundColor:"#ffffff",color:"#2c3e50"},alternateRowStyle:{backgroundColor:"#f8f9fa"}},minimal:{headerStyle:{backgroundColor:"#f8f9fa",color:"#495057",borderBottom:"2px solid #dee2e6"},cellStyle:{backgroundColor:"#ffffff",color:"#212529",border:"none",borderBottom:"1px solid #f1f3f4"},alternateRowStyle:{backgroundColor:"#fbfbfb"}}},X=(e={})=>{const{id:t,columns:n=[],rows:o=[],styling:i={},options:s={},skin:r={},onCellClick:a,onSort:l,onRowSelect:c,position:d,size:h,attach:u,variant:p="default",...g}=e,f=t||`table_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,m={rowHeight:40,...Y[p]||Y.default,...i},b={cellsMap:new Map,rowsMap:new Map,selectedRows:new Set,sortConfig:{column:null,direction:"asc"},columns:[...n],rows:[...o]};let y={width:h?.width?`${h.width}px`:"800px",height:h?.height?`${h.height}px`:"600px"};d&&(y={...y,position:"absolute",left:`${d.x}px`,top:`${d.y}px`}),r.container&&(y={...y,...r.container});const x=k("table-container",{id:f,css:y,...g}),w=k("table-header",{id:`${f}_header`,css:r.header||{}});b.columns.forEach((e,t)=>{const n=k("table-header-cell",{id:`${f}_header_${e.id}`,text:e.header||e.id,css:{width:e.width?`${e.width}px`:"auto",flex:e.width?"none":"1",...m.headerStyle,...e.style,...r.headerCell||{}},onclick:()=>{!1!==s.sortable&&!1!==e.sortable&&S(e.id)}});if(!1!==s.sortable&&!1!==e.sortable){const e=document.createElement("span");e.style.marginLeft="8px",e.style.opacity="0.5",e.textContent="â‡…",n.appendChild(e)}w.appendChild(n)});const v=k("table-body",{id:`${f}_body`,css:r.body||{}}),C=(e,t)=>{const n=k("table-row",{id:`${f}_row_${e.id||t}`,css:{height:`${m.rowHeight}px`,...t%2==1?m.alternateRowStyle:{},...r.row||{}}});return!1!==s.selectable&&(n.style.cursor="pointer",n.addEventListener("mouseenter",()=>{b.selectedRows.has(e.id)||Object.assign(n.style,m.states?.hover||{backgroundColor:"#e9ecef"})}),n.addEventListener("mouseleave",()=>{b.selectedRows.has(e.id)||Object.assign(n.style,t%2==1?m.alternateRowStyle:{backgroundColor:"#ffffff"})}),n.addEventListener("click",()=>{E(e.id,n)})),b.columns.forEach((o,i)=>{const s=e.cells?.[o.id]||{content:"",style:{}},l=k("table-cell",{id:`${f}_cell_${e.id}_${o.id}`,text:s.content||"",css:{width:o.width?`${o.width}px`:"auto",flex:o.width?"none":"1",...m.cellStyle,...o.style,...s.style,...r.cell||{}},onclick:e=>{e.stopPropagation(),a&&a(s,t,i)}});b.cellsMap.set(`${e.id}_${o.id}`,{element:l,data:s,rowId:e.id,columnId:o.id}),n.appendChild(l)}),b.rowsMap.set(e.id,{element:n,data:e,index:t}),n},S=e=>{const t="asc"===(b.sortConfig.column===e?b.sortConfig.direction:"asc")?"desc":"asc";b.sortConfig={column:e,direction:t},b.rows.sort((n,o)=>{const i=n.cells?.[e]?.content||"",s=o.cells?.[e]?.content||"",r=String(i).localeCompare(String(s),void 0,{numeric:!0});return"asc"===t?r:-r}),x.refresh(),l&&l(e,t),w.querySelectorAll(".hs-table-header-cell span").forEach(e=>{e.textContent="â‡…",e.style.opacity="0.5"});const n=w.querySelector(`#${f}_header_${e} span`);n&&(n.textContent="asc"===t?"â†‘":"â†“",n.style.opacity="1")},E=(e,t)=>{s.multiSelect?b.selectedRows.has(e)?(b.selectedRows.delete(e),Object.assign(t.style,{backgroundColor:"#ffffff"})):(b.selectedRows.add(e),Object.assign(t.style,m.states?.selected||{backgroundColor:"#007bff",color:"#ffffff"})):(b.selectedRows.forEach(e=>{const t=b.rowsMap.get(e);t&&Object.assign(t.element.style,{backgroundColor:"#ffffff"})}),b.selectedRows.clear(),b.selectedRows.add(e),Object.assign(t.style,m.states?.selected||{backgroundColor:"#007bff",color:"#ffffff"})),c&&c(e,Array.from(b.selectedRows))};if(x.refresh=()=>{v.innerHTML="",b.rows.forEach((e,t)=>{const n=C(e,t);v.appendChild(n)})},x.addRow=e=>{b.rows.push(e);const t=C(e,b.rows.length-1);return v.appendChild(t),x},x.removeRow=e=>{const t=b.rows.findIndex(t=>t.id===e);return-1!==t&&(b.rows.splice(t,1),b.rowsMap.delete(e),b.selectedRows.delete(e),x.refresh()),x},x.updateCell=(e,t,n)=>{const o=`${e}_${t}`,i=b.cellsMap.get(o);return i&&(i.data={...i.data,...n},i.element.textContent=n.content||"",n.style&&Object.assign(i.element.style,n.style)),x},x.getSelectedRows=()=>Array.from(b.selectedRows),x.clearSelection=()=>(b.selectedRows.forEach(e=>{const t=b.rowsMap.get(e);t&&Object.assign(t.element.style,{backgroundColor:"#ffffff"})}),b.selectedRows.clear(),x),x.sort=(e,t="asc")=>(b.sortConfig={column:e,direction:t},S(e),x),x.getData=()=>({columns:b.columns,rows:b.rows,selected:Array.from(b.selectedRows)}),x.appendChild(w),x.appendChild(v),x.refresh(),u){const e="string"==typeof u?document.querySelector(u):u;e&&e.appendChild(x)}return x};function V(e={}){const t={id:e.id||`template-${Date.now()}`,position:{x:0,y:0,...e.position},size:{width:"auto",height:"auto",...e.size},attach:e.attach||"body",content:e.content||"Template Component",style:{display:"block",position:"relative",backgroundColor:"#f5f5f5",border:"2px solid #ddd",borderRadius:"8px",padding:"16px",margin:"8px",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",color:"#333",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease",...e.style},behavior:{clickable:e.behavior?.clickable??!0,hoverable:e.behavior?.hoverable??!0,draggable:e.behavior?.draggable??!1,...e.behavior},onClick:e.onClick||null,onHover:e.onHover||null,onMount:e.onMount||null,onDestroy:e.onDestroy||null,debug:e.debug||!1};const n=function(){let e;"string"==typeof t.attach?(e=document.querySelector(t.attach),e||"body"!==t.attach||(e=document.body)):e=t.attach,e||(console.warn(`âš ï¸ Point d'attachement "${t.attach}" non trouvÃ©, utilisation de body`),e=document.body);const n=document.createElement("div");return n.id=t.id,n.className="hs-template","string"==typeof t.content?n.textContent=t.content:t.content instanceof HTMLElement?n.appendChild(t.content):Array.isArray(t.content)&&t.content.forEach(e=>{if("string"==typeof e){const t=document.createTextNode(e);n.appendChild(t)}else e instanceof HTMLElement&&n.appendChild(e)}),function(e){const n={};void 0===t.position.x&&void 0===t.position.y||(n.position="absolute",void 0!==t.position.x&&(n.left=`${t.position.x}px`),void 0!==t.position.y&&(n.top=`${t.position.y}px`));const o={};"auto"!==t.size.width&&(o.width="number"==typeof t.size.width?`${t.size.width}px`:t.size.width);"auto"!==t.size.height&&(o.height="number"==typeof t.size.height?`${t.size.height}px`:t.size.height);const i={...t.style,...n,...o};Object.assign(e.style,i)}(n),e.appendChild(n),t.debug&&console.log(`ðŸ“¦ Template component crÃ©Ã© et attachÃ© Ã  "${t.attach}"`),n}();return function(e){t.behavior.clickable&&t.onClick&&(e.addEventListener("click",n=>{t.onClick(e,n)}),e.style.cursor="pointer"),t.behavior.hoverable&&(e.addEventListener("mouseenter",n=>{e.style.transform="translateY(-2px)",e.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",t.onHover&&t.onHover(e,n,"enter")}),e.addEventListener("mouseleave",n=>{e.style.transform="translateY(0)",e.style.boxShadow=t.style.boxShadow||"0 2px 4px rgba(0,0,0,0.1)",t.onHover&&t.onHover(e,n,"leave")})),t.behavior.draggable&&(e.draggable=!0,e.addEventListener("dragstart",t=>{t.dataTransfer.setData("text/plain",e.id),e.style.opacity="0.7"}),e.addEventListener("dragend",()=>{e.style.opacity="1"}))}(n),t.onMount&&t.onMount(n),n.updateContent=function(e){return"string"==typeof e?this.textContent=e:e instanceof HTMLElement&&(this.innerHTML="",this.appendChild(e)),this},n.updateStyle=function(e){return Object.assign(this.style,e),this},n.destroy=function(){t.onDestroy&&t.onDestroy(this),this.parentNode&&this.parentNode.removeChild(this)},n.getConfig=function(){return{...t}},n}E("tooltip-container",{tag:"div",class:"hs-tooltip",css:{position:"absolute",backgroundColor:"#333",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"14px",zIndex:"9999",pointerEvents:"none",opacity:"0",transition:"opacity 0.2s ease"}});const G=(e={})=>{const{text:t="Tooltip",target:n,position:o="top",css:i={},...s}=e,r=k("tooltip-container",{text:t,css:{...i},...s});return n&&(n.addEventListener("mouseenter",()=>{r.style.opacity="1",document.body.appendChild(r);const e=n.getBoundingClientRect();r.style.left=e.left+e.width/2-r.offsetWidth/2+"px",r.style.top=e.top-r.offsetHeight-8+"px"}),n.addEventListener("mouseleave",()=>{r.style.opacity="0",setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},200)})),r};const K=new class{constructor(){this.units=new Map,this.connections=new Map,this.selectedUnits=new Set,this.dragState=null,this.connectionMode=!1,this.firstConnector=null,this.nextUnitId=1,this.nextConnectorId=1,this.nextConnectionId=1,this.connectorDragState={isDragging:!1,sourceConnector:null,dragLine:null},this.setupGlobalListeners()}setupGlobalListeners(){document.addEventListener("click",e=>{e.target.closest(".unit-container")||e.target.closest(".unit-connector")||this.deselectAll()})}generateUnitId(){return"unit_"+this.nextUnitId++}generateConnectorId(){return"connector_"+this.nextConnectorId++}generateConnectionId(){return"connection_"+this.nextConnectionId++}registerUnit(e){this.units.set(e.id,e)}unregisterUnit(e){this.removeAllConnectionsForUnit(e),this.units.delete(e),this.selectedUnits.delete(e)}removeAllConnectionsForUnit(e){const t=[];this.connections.forEach((n,o)=>{n.fromUnit!==e&&n.toUnit!==e||t.push(o)}),t.forEach(e=>this.removeConnection(e))}selectUnit(e){this.selectedUnits.add(e);const t=this.units.get(e);t&&t.element.classList.add("unit-selected")}deselectUnit(e){this.selectedUnits.delete(e);const t=this.units.get(e);t&&t.element.classList.remove("unit-selected")}deselectAll(){this.selectedUnits.forEach(e=>this.deselectUnit(e))}getSelectedUnits(){return Array.from(this.selectedUnits)}createConnection(e,t,n,o){const i=this.generateConnectionId(),s={id:i,fromUnit:e,fromConnector:t,toUnit:n,toConnector:o};return this.connections.set(i,s),this.renderConnection(s),i}removeConnection(e){if(this.connections.get(e)){const t=document.querySelector(`[data-connection-id="${e}"]`);t&&t.remove(),this.connections.delete(e)}}renderConnection(e){const t=this.units.get(e.fromUnit),n=this.units.get(e.toUnit);if(!t||!n)return;const o=t.element.querySelector(`[data-connector-id="${e.fromConnector}"]`),i=n.element.querySelector(`[data-connector-id="${e.toConnector}"]`);if(!o||!i)return;const s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("data-connection-id",e.id),s.classList.add("unit-connection-line"),this.updateConnectionPosition(s,o,i);let r=document.querySelector(".unit-connections-svg");r||(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.classList.add("unit-connections-svg"),r.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        z-index: 50;\n      ",document.body.appendChild(r)),r.appendChild(s)}updateConnectionPosition(e,t,n){const o=t.getBoundingClientRect(),i=n.getBoundingClientRect(),s=o.left+o.width/2,r=o.top+o.height/2,a=i.left+i.width/2,l=i.top+i.height/2;e.setAttribute("x1",s),e.setAttribute("y1",r),e.setAttribute("x2",a),e.setAttribute("y2",l),e.setAttribute("stroke","#666"),e.setAttribute("stroke-width","2")}updateAllConnections(){this.connections.forEach(e=>{const t=document.querySelector(`[data-connection-id="${e.id}"]`);if(t){const n=this.units.get(e.fromUnit),o=this.units.get(e.toUnit);if(n&&o){const i=n.element.querySelector(`[data-connector-id="${e.fromConnector}"]`),s=o.element.querySelector(`[data-connector-id="${e.toConnector}"]`);i&&s&&this.updateConnectionPosition(t,i,s)}}})}getAllConnections(){return Array.from(this.connections.values())}handleConnectorClick(e,t,n){if(this.firstConnector){const{unitId:o,connectorId:i,connectorType:s}=this.firstConnector;if((o!==e||i!==t)&&("input"===s&&"output"===n||"output"===s&&"input"===n)){let n,r,a,l;"output"===s?(n=o,r=i,a=e,l=t):(n=e,r=t,a=o,l=i);const c=Array.from(this.connections.values()).find(e=>e.fromUnit===n&&e.fromConnector===r&&e.toUnit===a&&e.toConnector===l);c?this.removeConnection(c.id):this.createConnection(n,r,a,l)}this.highlightConnector(o,i,!1),this.firstConnector=null}else this.firstConnector={unitId:e,connectorId:t,connectorType:n},this.highlightConnector(e,t,!0)}highlightConnector(e,t,n){const o=this.units.get(e);if(o){const e=o.element.querySelector(`[data-connector-id="${t}"]`);e&&(n?e.classList.add("connector-selected"):e.classList.remove("connector-selected"))}}startConnectorDrag(e,t,n,o){o.preventDefault(),o.stopPropagation(),this.connectorDragState.isDragging=!0,this.connectorDragState.sourceConnector={unitId:e,connectorId:t,connectorType:n},this.createDragLine(o),document.addEventListener("mousemove",this.handleConnectorDragMove.bind(this)),document.addEventListener("mouseup",this.handleConnectorDragEnd.bind(this))}createDragLine(e){let t=document.querySelector(".unit-connections-svg");t||(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.classList.add("unit-connections-svg"),t.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        z-index: 50;\n      ",document.body.appendChild(t));const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.classList.add("unit-drag-line"),n.setAttribute("stroke","#007bff"),n.setAttribute("stroke-width","2"),n.setAttribute("stroke-dasharray","5,5"),n.setAttribute("opacity","0.8");const o=this.getConnectorElement(this.connectorDragState.sourceConnector.unitId,this.connectorDragState.sourceConnector.connectorId);if(o){const t=o.getBoundingClientRect(),i=t.left+t.width/2,s=t.top+t.height/2;n.setAttribute("x1",i),n.setAttribute("y1",s),n.setAttribute("x2",e.clientX),n.setAttribute("y2",e.clientY)}t.appendChild(n),this.connectorDragState.dragLine=n}handleConnectorDragMove(e){if(!this.connectorDragState.isDragging||!this.connectorDragState.dragLine)return;this.connectorDragState.dragLine.setAttribute("x2",e.clientX),this.connectorDragState.dragLine.setAttribute("y2",e.clientY);const t=document.elementFromPoint(e.clientX,e.clientY);if(t&&t.classList.contains("unit-connector")){t.getAttribute("data-connector-id");const e=t.getAttribute("data-connector-type");t.closest(".unit-container").getAttribute("data-unit-id");const n=this.connectorDragState.sourceConnector.connectorType;("output"===n&&"input"===e||"input"===n&&"output"===e)&&t.classList.add("connector-drag-hover")}document.querySelectorAll(".connector-drag-hover").forEach(e=>{e.contains(t)||e.classList.remove("connector-drag-hover")})}handleConnectorDragEnd(e){if(!this.connectorDragState.isDragging)return;this.connectorDragState.dragLine&&this.connectorDragState.dragLine.remove();const t=document.elementFromPoint(e.clientX,e.clientY);if(t&&t.classList.contains("unit-connector")){const e=t.getAttribute("data-connector-id"),n=t.getAttribute("data-connector-type"),o=t.closest(".unit-container").getAttribute("data-unit-id"),i=this.connectorDragState.sourceConnector;if("output"===i.connectorType&&"input"===n||"input"===i.connectorType&&"output"===n){let t,n,s,r;"output"===i.connectorType?(t=i.unitId,n=i.connectorId,s=o,r=e):(t=o,n=e,s=i.unitId,r=i.connectorId);const a=Array.from(this.connections.values()).find(e=>e.fromUnit===t&&e.fromConnector===n&&e.toUnit===s&&e.toConnector===r);a?this.removeConnection(a.id):this.createConnection(t,n,s,r)}}document.querySelectorAll(".connector-drag-hover").forEach(e=>{e.classList.remove("connector-drag-hover")}),document.removeEventListener("mousemove",this.handleConnectorDragMove.bind(this)),document.removeEventListener("mouseup",this.handleConnectorDragEnd.bind(this)),this.connectorDragState.isDragging=!1,this.connectorDragState.sourceConnector=null,this.connectorDragState.dragLine=null}getConnectorElement(e,t){const n=this.units.get(e);return n?n.element.querySelector(`[data-connector-id="${t}"]`):null}};E("unit-container",{tag:"div",class:"unit-container",css:{position:"absolute",minWidth:"120px",minHeight:"80px",backgroundColor:"#f8f9fa",border:"2px solid #ddd",borderRadius:"8px",cursor:"move",userSelect:"none",overflow:"visible",zIndex:"100"}}),E("unit-header",{tag:"div",class:"unit-header",css:{backgroundColor:"#e9ecef",borderBottom:"1px solid #ddd",borderRadius:"6px 6px 0 0",padding:"8px 12px",fontWeight:"bold",fontSize:"14px",color:"#333",cursor:"move"}}),E("unit-name",{tag:"span",class:"unit-name",css:{display:"block",outline:"none",backgroundColor:"transparent",border:"none"}}),E("unit-body",{tag:"div",class:"unit-body",css:{padding:"8px 12px",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}}),E("unit-icon",{tag:"img",class:"unit-icon",attrs:{draggable:"false"},css:{maxWidth:"32px",maxHeight:"32px",objectFit:"contain",pointerEvents:"none"}}),E("unit-connector",{tag:"div",class:"unit-connector",css:{zIndex:"2",position:"absolute",width:"12px",height:"12px",backgroundColor:"#007bff",borderRadius:"50%",cursor:"pointer",border:"2px solid #fff",boxShadow:"0 0 0 1px #007bff"}}),E("unit-connector-input",{tag:"div",class:"unit-connector unit-connector-input",css:{position:"absolute",width:"12px",height:"12px",borderRadius:"50%",cursor:"pointer",border:"2px solid #fff",left:"-8px",backgroundColor:"#28a745",boxShadow:"0 0 0 1px #28a745"}}),E("unit-connector-output",{tag:"div",class:"unit-connector unit-connector-output",css:{position:"absolute",width:"12px",height:"12px",borderRadius:"50%",cursor:"pointer",border:"2px solid #fff",right:"-8px",backgroundColor:"#dc3545",boxShadow:"0 0 0 1px #dc3545"}});if(!document.querySelector("#unit-styles")){const e=document.createElement("style");e.id="unit-styles",e.textContent='\n  .unit-selected {\n    border-color: #007bff !important;\n    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25) !important;\n  }\n  \n  .unit-name[contenteditable="true"] {\n    background-color: rgba(255, 255, 255, 0.9) !important;\n    border: none !important;\n    border-radius: 3px !important;\n    padding: 0 !important;\n    outline: none !important;\n    box-shadow: inset 0 0 0 1px rgba(0, 123, 255, 0.3) !important;\n  }\n  \n  .connector-selected {\n    transform: scale(1.3) !important;\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.4) !important;\n  }\n  \n  .unit-connector:hover {\n    transform: scale(1.2);\n  }\n  \n  .connector-drag-hover {\n    transform: scale(1.4) !important;\n    box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.6) !important;\n  }\n  \n  .unit-icon.animated {\n    animation: iconPulse 0.3s ease;\n  }\n  \n  @keyframes iconPulse {\n    0% { transform: scale(1); }\n    50% { transform: scale(1.1); }\n    100% { transform: scale(1); }\n  }\n',document.head.appendChild(e)}class Z{constructor(e={}){const{id:t=K.generateUnitId(),name:n="Unit",position:o={x:100,y:100},inputs:i=[],outputs:s=[],icon:r=null,iconSrc:a=null,backgroundColor:l=null,parent:c=null}=e;this.id=t,this.name=n,this.position=o,this.inputs=[],this.outputs=[],this.isDragging=!1,this.dragOffset={x:0,y:0},this.isEditingName=!1,this.backgroundColor=l,this.parent=c,this.createElement(),this.setupDragging(),this.setupSelection(),this.setupNameEditing(),this.setPosition(o.x,o.y),l&&this.setBackgroundColor(l),K.registerUnit(this);this.getParentElement().appendChild(this.element),i.forEach(e=>this.addInput(e)),s.forEach(e=>this.addOutput(e)),this.adjustModuleHeight(),(r||a)&&this.setIcon(r||a)}createElement(){this.element=k("unit-container",{attrs:{"data-unit-id":this.id}}),this.header=k("unit-header"),this.nameElement=k("unit-name",{text:this.name}),this.body=k("unit-body"),this.header.appendChild(this.nameElement),this.element.appendChild(this.header),this.element.appendChild(this.body)}getParentElement(){return this.parent?"string"==typeof this.parent?this.parent.startsWith("#")?document.querySelector(this.parent)||document.body:document.getElementById(this.parent)||document.body:this.parent&&this.parent.nodeType===Node.ELEMENT_NODE?this.parent:document.body:document.body}setupDragging(){let e,t,n,o;const i=i=>{if(!this.isDragging)return;const s=i.clientX-e,r=i.clientY-t;this.setPosition(n+s,o+r),K.updateAllConnections()},s=()=>{this.isDragging=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)};this.header.addEventListener("mousedown",r=>{this.isEditingName||(this.isDragging=!0,e=r.clientX,t=r.clientY,n=this.position.x,o=this.position.y,document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),r.preventDefault())})}setupSelection(){this.element.addEventListener("click",e=>{e.stopPropagation(),e.ctrlKey||e.metaKey?K.selectedUnits.has(this.id)?K.deselectUnit(this.id):K.selectUnit(this.id):(K.deselectAll(),K.selectUnit(this.id))})}setupNameEditing(){this.nameElement.addEventListener("dblclick",e=>{e.stopPropagation(),this.startNameEditing()})}startNameEditing(){this.isEditingName=!0,this.nameElement.contentEditable=!0,this.nameElement.focus();const e=document.createRange();e.selectNodeContents(this.nameElement);const t=window.getSelection();t.removeAllRanges(),t.addRange(e);this.nameElement.addEventListener("blur",()=>{this.isEditingName=!1,this.nameElement.contentEditable=!1,this.name=this.nameElement.textContent.trim()||"Unit",this.nameElement.textContent=this.name},{once:!0}),this.nameElement.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),this.nameElement.blur())})}setPosition(e,t){this.position.x=e,this.position.y=t,this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}setBackgroundColor(e){this.backgroundColor=e,this.element&&(this.element.style.backgroundColor=e)}setIcon(e){const t=this.body.querySelector(".unit-icon");if(t&&t.remove(),!e)return;const n=k("unit-icon");n.draggable=!1,e.startsWith("data:"),n.src=e,this.body.appendChild(n),this.iconElement=n}animateIcon(){this.iconElement&&(this.iconElement.classList.add("animated"),setTimeout(()=>{this.iconElement.classList.remove("animated")},300))}addInput(e={}){const{id:t=K.generateConnectorId(),name:n=`Input ${this.inputs.length+1}`,color:o="#28a745"}=e,i=k("unit-connector-input",{attrs:{"data-connector-id":t,"data-connector-type":"input",title:n}});o&&(i.style.backgroundColor=o,i.style.boxShadow=`0 0 0 1px ${o}`);const s=this.inputs.length;return i.style.top=49+20*s+"px",i.addEventListener("click",e=>{e.stopPropagation(),K.handleConnectorClick(this.id,t,"input")}),i.addEventListener("mousedown",e=>{e.stopPropagation(),K.startConnectorDrag(this.id,t,"input",e)}),this.element.appendChild(i),this.inputs.push({id:t,name:n,color:o,element:i}),this.adjustModuleHeight(),t}addOutput(e={}){const{id:t=K.generateConnectorId(),name:n=`Output ${this.outputs.length+1}`,color:o="#dc3545"}=e,i=k("unit-connector-output",{attrs:{"data-connector-id":t,"data-connector-type":"output",title:n}});o&&(i.style.backgroundColor=o,i.style.boxShadow=`0 0 0 1px ${o}`);const s=this.outputs.length;return i.style.top=49+20*s+"px",i.addEventListener("click",e=>{e.stopPropagation(),K.handleConnectorClick(this.id,t,"output")}),i.addEventListener("mousedown",e=>{e.stopPropagation(),K.startConnectorDrag(this.id,t,"output",e)}),this.element.appendChild(i),this.outputs.push({id:t,name:n,color:o,element:i}),this.adjustModuleHeight(),t}removeInput(e){const t=this.inputs.findIndex(t=>t.id===e);if(-1!==t){this.inputs[t].element.remove(),this.inputs.splice(t,1),this.repositionInputs()}}removeOutput(e){const t=this.outputs.findIndex(t=>t.id===e);if(-1!==t){this.outputs[t].element.remove(),this.outputs.splice(t,1),this.repositionOutputs()}}repositionInputs(){this.inputs.forEach((e,t)=>{e.element.style.top=49+20*t+"px"}),this.adjustModuleHeight()}repositionOutputs(){this.outputs.forEach((e,t)=>{e.element.style.top=49+20*t+"px"}),this.adjustModuleHeight()}adjustModuleHeight(){const e=Math.max(this.inputs.length,this.outputs.length);if(0===e)return this.element.style.height="auto",void(this.element.style.minHeight="60px");const t=20*Math.max(1,e),n=35+Math.max(32,t)+16+8;this.element.style.height=`${n}px`,this.element.style.minHeight=`${n}px`,console.log(`ðŸ“ Unit ${this.name}: ${e} connecteurs max â†’ hauteur ${n}px`)}select(){K.selectUnit(this.id)}deselect(){K.deselectUnit(this.id)}rename(e){this.name=e,this.nameElement.textContent=e}destroy(){K.unregisterUnit(this.id),this.element.remove()}onClick(){this.animateIcon()}onLongClick(){this.animateIcon()}}function J(e){return new Z(e)}if($.components={Slider:A,Badge:I,Button:_,Draggable:H,makeDraggable:j,makeDraggableWithDrop:q,makeDropZone:O,List:P,Matrix:N,Menu:B,Minimal:F,Table:X,Template:V,Tooltip:G,Unit:J},"undefined"!=typeof window&&(window.makeDraggable=j,window.makeDraggableWithDrop=q,window.makeDropZone=O,window.__forceKeep=[j,q,O]),"undefined"!=typeof window){window.Squirrel=window.Squirrel||{},window.Squirrel.Apis=g,window.Apis=g,window.$=$.$,window.Squirrel.$=$.$,window.Squirrel.define=$.define,window.Squirrel.batch=$.batch,window.Squirrel.observeMutations=$.observeMutations,window.define=$.define,window.batch=$.batch,window.observeMutations=$.observeMutations,window.Squirrel.Slider=A,window.Squirrel.Badge=I,window.Squirrel.Button=_,window.Squirrel.Draggable=H,window.Squirrel.makeDraggable=j,window.Squirrel.makeDraggableWithDrop=q,window.Squirrel.makeDropZone=O,window.Squirrel.List=P,window.Squirrel.Matrix=N,window.Squirrel.Menu=B,window.Squirrel.Minimal=F,window.Squirrel.Table=X,window.Squirrel.Template=V,window.Squirrel.Tooltip=G,window.Squirrel.Unit=J,window.Slider=window.Squirrel.Slider,window.Badge=window.Squirrel.Badge,window.Button=window.Squirrel.Button,window.Draggable=window.Squirrel.Draggable,window.List=window.Squirrel.List,window.Matrix=window.Squirrel.Matrix,window.Menu=window.Squirrel.Menu,window.Minimal=window.Squirrel.Minimal,window.Table=window.Squirrel.Table,window.Template=window.Squirrel.Template,window.Tooltip=window.Squirrel.Tooltip,window.Unit=window.Squirrel.Unit;const e=()=>{if(!document.getElementById("view")){const e=document.createElement("div");e.id="view",document.body.appendChild(e)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{window.squirrelReady=!0,window.dispatchEvent(new Event("squirrel:ready"))},0)})}e.Apis=g,e.Badge=I,e.Button=_,e.Draggable=H,e.List=P,e.Matrix=N,e.Menu=B,e.Minimal=F,e.Slider=A,e.Squirrel=$,e.Table=X,e.Template=V,e.Tooltip=G,e.Unit=J,e.default=$,e.makeDraggable=j,e.makeDraggableWithDrop=q,e.makeDropZone=O,Object.defineProperty(e,"__esModule",{value:!0})});