<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Squirrel.js avec Kickstart</title>
</head>
<body>
    <h1>🐿️ Test Kickstart intégré</h1>

    <!-- Chargement du bundle avec kickstart -->
    <script src="https://cdn.jsdelivr.net/gh/atomecorp/a@main/dist/squirrel.js"></script>
    
    <script>
        window.addEventListener('squirrel:ready', (event) => {
            function createMaterialToggle(initialState = false) {
  let state = initialState;
  
  const container = document.createElement('div');
  container.style.cssText = `
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
  `;
  
  const toggle = Button({
    text: '',
    onClick: () => {
      state = !state;
      updateVisualState();
      console.log('Toggle:', state ? 'ON ✅' : 'OFF ❌');
    },
    style: {
      width: '50px',
      height: '24px',
      borderRadius: '12px',
      backgroundColor: state ? '#4CAF50' : '#ccc',
      position: 'relative',
      border: 'none',
      cursor: 'pointer',
      transition: 'background-color 0.3s ease'
    }
  });
  
  // const thumb = document.createElement('div');
  // thumb.style.cssText = `
  //   position: absolute;
  //   top: 2px;
  //   left: ${state ? '26px' : '2px'};
  //   width: 20px;
  //   height: 20px;
  //   border-radius: 50%;
  //   background: white;
  //   transition: left 0.3s ease;
  //   box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  // `;
  
  // toggle.appendChild(thumb);
  
  const label = document.createElement('span');
  label.textContent = state ? 'Activé' : 'Désactivé';
  label.style.fontWeight = 'bold';
  
  function updateVisualState() {
    toggle.style.backgroundColor = state ? '#4CAF50' : '#ccc';
    // thumb.style.left = state ? '26px' : '2px';
    label.textContent = state ? 'Activé' : 'Désactivé';
    label.style.color = state ? '#4CAF50' : '#666';
  }
  
  container.appendChild(toggle);
  container.appendChild(label);
  
  return {
    element: container,
    getValue: () => state,
    setValue: (newState) => {
      state = newState;
      updateVisualState();
    }
  };
}

// Utilisation
const myToggle = createMaterialToggle(false);
document.body.appendChild(myToggle.element);

// Pour récupérer la valeur
console.log('État actuel:', myToggle.getValue());
            console.log('🎯 Squirrel.js prêt avec kickstart!', event.detail);
            
            // Vérifier que le kickstart a bien créé la vue
            const view = document.getElementById('view');
            if (view) {
                console.log('✅ Vue principale créée par kickstart:', view);
                console.log('📐 Styles de la vue:', window.getComputedStyle(view));
                
                // Ajouter du contenu dans la vue
                const content = $('div', {
                    text: '🎉 Kickstart fonctionne ! La vue principale est créée.',
                    css: {
                        padding: '20px',
                        fontSize: '18px',
                        textAlign: 'center',
                        backgroundColor: '#333',
                        color: '#fff',
                        margin: '20px',
                        borderRadius: '8px'
                    }
                });
                
                view.appendChild(content);
                
                // Test d'un composant dans la vue
                if (window.Button) {
                    const button = Button({
                        text: '🔥 Button dans la vue',
                        css: {
                            display: 'block',
                            margin: '20px auto',
                            padding: '15px 30px',
                            backgroundColor: '#007bff',
                            color: 'white',
                            border: 'none',
                            borderRadius: '5px',
                            fontSize: '16px',
                            cursor: 'pointer'
                        },
                        events: {
                            click: () => alert('Button dans la vue kickstart !')
                        }
                    });
                    
                    view.appendChild(button);
                    console.log('✅ Button ajouté dans la vue');
                }
                
            } else {
                console.error('❌ Vue principale non trouvée - kickstart a échoué');
            }
        });
    </script>
</body>
</html>
