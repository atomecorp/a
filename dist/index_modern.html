<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Squirrel.js - Version ModernisÃ©e</title>
</head>
<body>
    <script src="./squirrel.js"></script>
    <script>
        console.log('ğŸ¯ Application dÃ©marrÃ©e sans attendre !');
        
        // âœ… APIs disponibles immÃ©diatement
        console.log('âœ… $ disponible:', typeof $ !== 'undefined');
        console.log('âœ… makeDraggable disponible:', typeof makeDraggable !== 'undefined');
        
        // âœ… Pour crÃ©er des Ã©lÃ©ments DOM, attendre que le DOM soit prÃªt
        window.whenSquirrelDOMReady(() => {
            console.log('ğŸ¯ DOM prÃªt, crÃ©ation des Ã©lÃ©ments');
            
            // CrÃ©er l'Ã©lÃ©ment immÃ©diatement
            const monSpan = $('span', {
                id: 'test1',
                css: {
                    backgroundColor: '#00f',
                    display: 'block',
                    position: 'absolute',
                    marginLeft: '0',
                    padding: '10px',
                    color: 'white',
                    margin: '10px',
                    borderRadius: '5px'
                },
                text: 'Je suis un SPAN moderne ! ğŸ¯'
            });

            makeDraggable(grab('test1'), {
                onDragStart: (element, event) => { 
                    puts(`DÃ©but du drag sur l'Ã©lÃ©ment ${element.id} !`); 
                }
            });
            
            grab('test1').left = '100px';
            
            console.log('âœ… Ã‰lÃ©ment crÃ©Ã© et configurÃ© sans setTimeout !');
        });
        
        // ğŸ“¢ L'ancien Ã©vÃ©nement fonctionne toujours (pour compatibilitÃ©)
        window.addEventListener('squirrel:ready', (event) => {
            console.log('ğŸ”„ Ã‰vÃ©nement squirrel:ready reÃ§u (rÃ©trocompatibilitÃ©)');
            console.log('ğŸ’¡ Mais le code moderne au-dessus s\'exÃ©cute dÃ©jÃ  !');
        });
        
        console.log('ğŸ‰ Tout fonctionne sans attendre squirrel:ready !');
    </script>
</body>
</html>
